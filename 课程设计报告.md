# å…¬å¸äººäº‹ç®¡ç†ç³»ç»Ÿ<br>è¯¾ç¨‹è®¾è®¡æŠ¥å‘Š

 æ— 07 é™ˆå®‡é˜³ 2020010816

---

## ç³»ç»Ÿéœ€æ±‚åˆ†æ

å…¬å¸äººäº‹ç®¡ç†ç³»ç»Ÿæ˜¯ä¸ºäº†ç®¡ç†ä¸€å®¶å…¬å¸çš„äººäº‹æƒ…å†µã€‚æ‹›è˜äº†ä¸€ä½æ–°å‘˜å·¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨äººå‘˜è®°å½•è¡¨ä¸­æ·»åŠ æ­¤äººå‘˜çš„ä¿¡æ¯ï¼›ç‚’äº†ä¸€ä½å‘˜å·¥çš„é±¿é±¼ï¼Œæˆ‘ä»¬éœ€è¦åœ¨äººå‘˜è®°å½•è¡¨ä¸­å°†ä»–åˆ å»ï¼›è€æ¿æœ‰å¯èƒ½æƒ³ä¸èµ·æ¥äº†å‘˜å·¥çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå…¨éƒ¨å‘˜å·¥ä¿¡æ¯æ˜¾ç¤ºç»™è€æ¿çœ‹ï¼›å…¬å¸å¼€ç”Ÿæ—¥ä¼šéœ€è¦äº†è§£å‘˜å·¥ç”Ÿæ—¥ï¼Œæˆ‘ä»¬éœ€è¦èƒ½åœ¨äººå‘˜è®°å½•è¡¨ä¸­æŸ¥è¯¢å…·ä½“äººå‘˜ä¿¡æ¯ï¼›æŸä½å‘˜å·¥å–œå¾—å‡è¿ï¼Œæˆ‘ä»¬è¦åœ¨äººå‘˜è®°å½•è¡¨ä¸­ä¿®æ”¹ä»–çš„ä¿¡æ¯ã€‚

å› æ­¤è®¾è®¡å…¬å¸äººäº‹ç®¡ç†ç³»ç»Ÿï¼Œä»¥å®ç°å¯¹å…¬å¸äººäº‹ä¿¡æ¯çš„å¢æ·»ã€åˆ é™¤ã€æ˜¾ç¤ºã€æŸ¥è¯¢ä¸ä¿®æ”¹åŠŸèƒ½ã€‚

è®¡åˆ’æ­¤ç³»ç»Ÿä»¥èœå•æ–¹å¼å·¥ä½œï¼Œå³ç³»ç»Ÿä¼šæ˜¾ç¤ºä¸€ä¸ªå¸¦æœ‰æ–¹æ³•é€‰æ‹©æŒ‡å¼•çš„ä¸»ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥è‡ªç”±é€‰æ‹©èœå•ä¸­çš„æ–¹æ³•è¿›è¡Œæ“ä½œã€‚ä¸»ç•Œé¢ç»è¿‡ç²¾å¿ƒçš„è‰ºæœ¯è®¾è®¡ï¼Œè¿˜å¸¦æœ‰ä¿å§†çº§çš„æ¸©é¦¨æç¤ºã€‚åŒæ—¶ï¼Œç³»ç»Ÿæä¾›çš„æ–¹æ³•æ¯ä¸€æ­¥éƒ½æœ‰æ¸…æ™°æ˜äº†çš„æŒ‡å¼•ï¼Œä»¥ç¡®ä¿ç”¨æˆ·ä¸ä¼šè¿›è¡Œé”™è¯¯çš„æ“ä½œï¼ŒåŠ›æ±‚ä¸ºæ¯ä¸€ä½ç”¨æˆ·æä¾›æè‡´çš„äººäº‹ç®¡ç†ä½“éªŒã€‚

>  æ³¨ï¼šæœ¬ç³»ç»ŸåŸæœ¬ä¸ºå…¬å¸äººäº‹ç®¡ç†ç³»ç»Ÿï¼Œä½†ç”±äºæœ¬äººå¯¹å…¬å¸çš„äººäº‹ç»§æ‰¿å’Œæ´¾ç”Ÿå…³ç³»ä¸ç”šäº†è§£ï¼Œæ•…æ”¹ä¸ºå­¦æ ¡çš„äººäº‹ç®¡ç†ç³»ç»Ÿã€‚



## æ€»ä½“è®¾è®¡

### ç³»ç»ŸåŠŸèƒ½åˆ†æ

æœ¬ç³»ç»Ÿæä¾›å¯¹å­¦æ ¡å†…äººäº‹çš„å‚¨å­˜å’Œç®¡ç†æ“ä½œï¼ŒåŒ…å«äº†

* æ— ç±»åˆ«äººå‘˜
* æœ¬ç§‘ç”Ÿ
* ç ”ç©¶ç”Ÿ
* æ•™èŒäººå‘˜
* åŠ©æ•™

äº”ä¸ªäººå‘˜ç±»åˆ«ï¼Œæ¯ä¸ªç±»åˆ«å‡å‚¨å­˜å…¶å§“åã€ç¼–å·ã€æ€§åˆ«ã€ç”Ÿæ—¥ç­‰åŸºæœ¬ä¿¡æ¯ï¼Œå†æ ¹æ®å…·ä½“ç±»åˆ«çš„ä¸åŒåˆ†åˆ«å‚¨å­˜å…¶ç‰¹æœ‰çš„ä¿¡æ¯ï¼Œå¦‚ä¸“ä¸šã€éƒ¨é—¨ç­‰ã€‚åœ¨å‚¨å­˜ä¿¡æ¯çš„åŸºç¡€ä¸Šï¼Œç³»ç»Ÿæä¾›äº†å¢ã€åˆ ã€æ”¹ã€æŸ¥ç­‰åŠŸèƒ½ï¼Œç°è¯¦è¿°å¦‚ä¸‹ï¼š

1. **å¢åŠ äººå‘˜**

   ç”¨æˆ·å¯ä»¥å¾€å‚¨å­˜æ–‡ä»¶ `å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt` ä¸­æ·»åŠ äººå‘˜ä¿¡æ¯ã€‚ä»é”®ç›˜ä¸­è¾“å…¥ä»¥é€‰æ‹©æƒ³è¦æ·»åŠ çš„äººå‘˜ç±»åˆ«ï¼Œæ ¹æ®æç¤ºè¾“å…¥å¯¹åº”å§“åã€å­¦å·ç­‰äººå‘˜ä¿¡æ¯ï¼Œè¾“å…¥å®Œæˆåç³»ç»Ÿä¼šä»¥å­—ç¬¦ä¸²æµçš„æ–¹å¼å°†ä¿¡æ¯å‚¨å­˜èµ·æ¥ï¼Œæœªæ¥ä¹Ÿå¯ä»¥ä»æ–‡ä»¶ä¸­é‡æ–°è¯»å‡ºæ­¤ä¿¡æ¯ã€‚

2. **åˆ é™¤äººå‘˜**

   ç”¨æˆ·å¯ä»¥åœ¨å‚¨å­˜æ–‡ä»¶ `å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt` ä¸­åˆ é™¤äººå‘˜ä¿¡æ¯ã€‚ä»é”®ç›˜ä¸­è¾“å…¥æƒ³è¦åˆ é™¤çš„äººå‘˜çš„å§“åæˆ–è€…å­¦å·ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨éå†æ•´ä¸ªå‚¨å­˜æ–‡ä»¶å¯»æ‰¾åŒ¹é…çš„äººå‘˜ï¼Œè‹¥æ‰¾åˆ°ï¼Œåˆ™è¯¢é—®æ˜¯å¦è¦åˆ é™¤ã€‚ç”¨æˆ·ç¡®è®¤åï¼Œç³»ç»Ÿå°†åœ¨å‚¨å­˜æ–‡ä»¶çš„åŸä½ç½®æ°¸ä¹…åˆ é™¤è¯¥äººå‘˜çš„ä¿¡æ¯ã€‚å¦‚æœæœ‰åŒåæˆ–è€…åŒå­¦å·çš„äººå‘˜ï¼Œåˆ™ä»…åˆ é™¤ç”¨æˆ·ç¡®è®¤åˆ é™¤çš„ç¬¬ä¸€ä½äººå‘˜ï¼Œå…¶ä»–äººå‘˜å¯ä»¥é€šè¿‡å†æ¬¡è¿›è¡Œåˆ é™¤æ“ä½œæ¥åˆ é™¤ã€‚åˆ é™¤æ“ä½œä¸ä¼šæ”¹å˜å‚¨å­˜æ–‡ä»¶ä¸­å…¶ä»–ä¿¡æ¯çš„æ’å¸ƒå½¢å¼ã€‚

3. **æ˜¾ç¤ºå…¨éƒ¨**

   ç”¨æˆ·å¯ä»¥é€šè¿‡æ­¤æ–¹æ³•è¯»å–å‚¨å­˜æ–‡ä»¶ `å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt` ä¸­çš„å…¨éƒ¨äººå‘˜ä¿¡æ¯å¹¶æ˜¾ç¤ºå‡ºæ¥ã€‚æ­¤æ˜¾ç¤ºå¹¶ä¸æ˜¯å•çº¯åœ°è¾“å‡ºå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯æœ‰å¯¹åº”ä¿¡æ¯çš„æ ‡ç­¾å’Œä¸åŒäººå‘˜çš„åˆ†ç¦»ã€‚ä¸€ç›®äº†ç„¶ï¼Œæ–¹ä¾¿åç»­çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚

4. **æŸ¥è¯¢äººå‘˜**

   ç”¨æˆ·å¯ä»¥åœ¨å‚¨å­˜æ–‡ä»¶ `å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt` ä¸­æŸ¥è¯¢äººå‘˜ä¿¡æ¯ã€‚ä»é”®ç›˜ä¸­è¾“å…¥æƒ³è¦æŸ¥è¯¢çš„äººå‘˜çš„å§“åæˆ–è€…å­¦å·ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨éå†æ•´ä¸ªå‚¨å­˜æ–‡ä»¶å¯»æ‰¾åŒ¹é…çš„äººå‘˜ï¼Œè‹¥æ‰¾åˆ°ï¼Œåˆ™æ˜¾ç¤ºå‡ºè¯¥äººå‘˜çš„ä¿¡æ¯ã€‚å¦‚æœæœ‰åŒåæˆ–è€…åŒå­¦å·çš„äººå‘˜ï¼Œç³»ç»Ÿä¼šæŠŠæ‰€æœ‰åŒ¹é…çš„ä¿¡æ¯å…¨éƒ¨æ˜¾ç¤ºå‡ºæ¥å¹¶åœ¨æœ€åæ˜¾ç¤ºæ‰¾åˆ°åŒ¹é…ä¿¡æ¯çš„æ•°ç›®ã€‚

5. **ä¿®æ”¹äººå‘˜**

   ç”¨æˆ·å¯ä»¥åœ¨å‚¨å­˜æ–‡ä»¶ `å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt` ä¸­ä¿®æ”¹äººå‘˜ä¿¡æ¯ã€‚ä»é”®ç›˜ä¸­è¾“å…¥æƒ³è¦ä¿®æ”¹çš„äººå‘˜çš„å§“åæˆ–è€…å­¦å·ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨éå†æ•´ä¸ªå‚¨å­˜æ–‡ä»¶å¯»æ‰¾åŒ¹é…çš„äººå‘˜ï¼Œè‹¥æ‰¾åˆ°ï¼Œåˆ™æ˜¾ç¤ºå‡ºè¯¥äººå‘˜çš„ä¿¡æ¯ï¼Œå¹¶è¯¢é—®æ˜¯å¦éœ€è¦ä¿®æ”¹ã€‚ è‹¥ç”¨æˆ·ç¡®è®¤ä¿®æ”¹ï¼Œåˆ™å¯ä»¥é€‰æ‹©éœ€è¦å½•å…¥çš„æ–°äººå‘˜ç±»å‹å¹¶è¾“å…¥å¯¹åº”çš„ä¿¡æ¯ã€‚ç³»ç»Ÿå°†åœ¨å‚¨å­˜æ–‡ä»¶åŸæ¥çš„ä½ç½®å¤„å‚¨å­˜æ–°è¾“å…¥çš„ä¿¡æ¯ã€‚å¦‚æœæœ‰åŒåæˆ–è€…åŒå­¦å·çš„äººå‘˜ï¼Œåˆ™ä»…ä¿®æ”¹ç”¨æˆ·ç¡®è®¤ä¿®æ”¹çš„ç¬¬ä¸€ä½äººå‘˜ï¼Œå…¶ä»–äººå‘˜å¯ä»¥é€šè¿‡å†æ¬¡è¿›è¡Œä¿®æ”¹æ“ä½œæ¥ä¿®æ”¹ã€‚å…¶ä»–ä¿¡æ¯çš„é¡ºåºæ’å¸ƒä¸ä¼šè¢«æ‰“ä¹±ã€‚

   

### åŠŸèƒ½æ¨¡å—å›¾



![image-20210720133623878](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210720133623878.png)

---

## è¯¦ç»†è®¾è®¡

	### ç±»ç»“æ„å›¾



<img src="C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210720135116620.png" alt="image-20210720135116620" style="zoom:67%;" />

### å·¥ä½œæµç¨‹å›¾

<img src="C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210720135935722.png" alt="image-20210720135935722" style="zoom:67%;" />

â€‹                                                                                               ğŸ‘† åŒæ—¶ä¹Ÿæ˜¯å·¥ä½œæµç¨‹å›¾

### äººå‘˜ç»“æ„Â·UMLç±»å›¾



![image-20210721142429742](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210721142429742.png)





### å…¶ä»–ç±»å‹

æ­¤å¤–ï¼Œä¸ºäº†è´¯å½»è½å®C++é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡æ€æƒ³ï¼Œæˆ‘è¿˜åœ¨ç³»ç»Ÿä¸­å£°æ˜äº†ä¸¤ä¸ªç±»ã€‚

ä¸€ä¸ªæ˜¯ `FileErr` ç±»ï¼Œè®¡åˆ’åœ¨å‚¨å­˜æ–‡ä»¶æ‰“å¼€æˆ–è¯»å–å‘ç”Ÿå¼‚å¸¸æ—¶è°ƒç”¨ï¼ŒæŠ¥å‘Šé”™è¯¯ä¿¡æ¯å¹¶è·³è¿‡è¯¥æ®µçš„æ‰§è¡Œï¼Œä»¥å…å‘ç”Ÿç³»ç»Ÿå´©æºƒçš„æƒ…å†µã€‚

<img src="C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210721142921844.png" alt="image-20210721142921844" style="zoom:67%;" />



å¦ä¸€ä¸ªæ˜¯`conductor` ç±»ï¼ŒæŠŠä¸ç”¨æˆ·è¿›è¡Œäº¤äº’çš„å…­ä¸ªå‡½æ•°å°è£…èµ·æ¥ï¼Œå¯¹äºå¤´æ–‡ä»¶çš„è°ƒç”¨ä¹Ÿå…¨éƒ¨åœ¨è¿™ä¸ªç±»ä¸­è¿›è¡Œã€‚é™åˆ¶äº†ç”¨æˆ·è¿›è¡Œå…¶ä»–çš„æ“ä½œï¼Œå¹¶é€ æˆäº†æ•´ä¸ªmainå‡½æ•°åªæœ‰ä¸€ä¸ªå¯¹è±¡çš„é‡‘åˆšèŠ­æ¯”çš„å‡è±¡ã€‚ï¼ˆ

<img src="C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210721143611715.png" alt="image-20210721143611715" style="zoom:67%;" />





## ç³»ç»Ÿè°ƒè¯•

â€‹	æ‘¸ç€çŸ³å¤´è¿‡æ²³ï¼Œæˆ‘åœ¨å†™bugå’Œdebugçš„è‰¯æ€§å¾ªç¯ä¸­é€æ­¥å®Œå–„ç€è‡ªå·±çš„ç¨‹åºï¼Œä»¥ä¸‹æ˜¯ä¸€äº›åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­é‡åˆ°çš„å…¸å‹çš„é—®é¢˜ï¼š

* `char*`ç±»æ“ä½œå›°éš¾

  æˆ‘ä¸€å¼€å§‹å†™ç¨‹åºè®°å½•ä¿¡æ¯æ˜¯ä½¿ç”¨`char*`çš„ï¼Œéšç€åæ¥å¯¹å­—ç¬¦ä¸²ä¿¡æ¯è°ƒç”¨å’Œä¿®æ”¹éœ€æ±‚é€æ¸å¢å¤šï¼Œæˆ‘ä¸å¾—ä¸æ”¹ä¸º`string`ç±»ã€‚æ‰€ä»¥`char*`ï¼Œè¿™ä¸€æ¥è‡ªCè¯­è¨€çš„å†å²é—ç•™æœ‰ä»€ä¹ˆä¸å¥½å‘¢ï¼Ÿ

  é¦–å…ˆï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œæ²¡æœ‰æ„é€ å‡½æ•°ï¼Œåœ¨ä½ ç»™å®ƒåˆ†é…ç©ºé—´ä»¥å‰ï¼Œå®ƒå°±æ˜¯ç©ºæ‚¬çš„ï¼Œä¸èƒ½ç›´æ¥ç»™ä¸€ä¸ª`char*`èµ‹å€¼ã€‚é‚£ç»™å®ƒåˆ†é…å¤šå°‘ç©ºé—´å‘¢ï¼Ÿåœ¨ç”¨æˆ·è¾“å…¥ä»¥å‰ï¼Œè¿™æ˜¯æ— æ³•ç¡®å®šçš„ï¼Œä½ åªèƒ½ç»™å®ƒåˆ†é…ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ç©ºé—´ï¼Œä»¥å…ç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯è¿‡é•¿å¯¼è‡´å†…å­˜æº¢å‡ºï¼Œè¿™æ˜¾ç„¶æ˜¯ä½æ•ˆè€Œä¸ä¼˜ç¾çš„æ–¹æ³•ã€‚

  `char* `æ‰€å¼•å‘çš„æµ…æ‹·è´é—®é¢˜ã€‚æµ…æ‹·è´æ˜¯å«æœ‰æŒ‡é’ˆå˜é‡çš„æ•°æ®æˆå‘˜çš„ç±»æ‰€é¢ä¸´çš„å…±åŒé—®é¢˜ï¼Œåœ¨å¤åˆ¶æ„é€ å‡½æ•°ä¸­ï¼Œä½ ä¸èƒ½å¯¹`char*`ç›´æ¥è¿›è¡Œ`operator=`çš„æ“ä½œå› ä¸ºå®ƒä»¬å°†æŒ‡å‘åŒä¸€ç©ºé—´ï¼Œè‹¥å…¶ä¸­ä¸€ä¸ªå¯¹è±¡è¢«ææ„ï¼Œå¦ä¸€ä¸ªå¯¹è±¡çš„ä¿¡æ¯ä¹Ÿä¼šä¸¢å¤±ã€‚è§£å†³æ–¹æ³•åªæœ‰åœ¨å‡½æ•°ä½“ä¸­ç»™æŒ‡é’ˆé‡æ–°`new`ä¸€ä¸ªç©ºé—´ï¼Œå¹¶ç»™ç©ºé—´èµ‹å€¼ã€‚ä½†è¿™åˆå¾ˆå¯èƒ½å¯¼è‡´ä½ å¿˜è®°äº†`delete`è€Œå¼•å‘å†…å­˜æ³„æ¼é—®é¢˜ï¼Œè¿˜è¦è®°å¾—deleteè¦å†™æˆ`delete []char`ã€‚æœ¬ç³»ç»Ÿæ‰€å£°æ˜çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½éœ€è¦å¤šä¸ªå­—ç¬¦ä¸²æ¥è®°å½•ä¿¡æ¯ï¼Œéœ€è¦æ³¨æ„å¤šå°‘ä¸ª`char*`çš„ç”Ÿæˆå’Œåˆ é™¤ï¼Ÿ

  `char*`çš„ç›¸ç­‰åˆ¤æ–­å›°éš¾ã€‚åœ¨å¯¹äººå‘˜ä¿¡æ¯çš„æŸ¥è¯¢å’Œä¿®æ”¹å‡½æ•°ä¸­ï¼Œéƒ½éœ€è¦è¿›è¡Œå·²æœ‰ä¿¡æ¯å’Œè¾“å…¥ä¿¡æ¯çš„åŒ¹é…ã€‚ä¸¤ä¸ª`char*`æŒ‡é’ˆæ¯”è¾ƒæ˜¾ç„¶ä¸ç­‰ï¼Œå› ä¸ºè¿™ä¸ªæ¯”è¾ƒçš„æ˜¯å®ƒä»¬çš„åœ°å€ã€‚ä¸¤ä¸ª`*pt`æ¯”è¾ƒä¹Ÿä¸ç­‰ï¼Œå› ä¸ºè™½ç„¶å­—ç¬¦ä¸²ç›¸åŒï¼Œä½†ç©ºé—´å¤§å°ä¸åŒï¼ˆå­—ç¬¦ä¸²åé¢è¿˜æœ‰`\0`ï¼‰ã€‚æ ¹æœ¬æ²¡æ³•å®ç°åŒ¹é…ã€‚æœ€åæˆ‘çš„è§£å†³æ–¹æ³•æ˜¯`if (strcmp(p,number)==0|| strcmp(p, name) == 0)`ç”¨å­—ç¬¦ä¸²æ¯”è¾ƒå‡½æ•°ã€‚

  ä½¿ç”¨`char*`å¯¼è‡´çš„å›°éš¾è¿˜æœ‰å¾ˆå¤šï¼Œåœ¨æ­¤ä¸ä½œä¸€ä¸€åˆ—ä¸¾ã€‚æˆ‘ä¹Ÿæ˜ç™½`char*`æ˜¯`string`çš„åŸºç¡€ï¼Œå¼„æ‡‚åŸºç¡€å¾ˆé‡è¦ï¼Œä½†æ˜¯ã€‚ã€‚ã€‚ä½¿ç”¨`string`çš„ç¡®èƒ½çœç•¥å¾ˆå¤šéº»çƒ¦ï¼Œæ²¡æœ‰åˆ†é…ç©ºé—´çš„ç—›è‹¦ï¼Œæ²¡æœ‰ä¼ å€¼ä¼ å€çš„å›°éš¾ï¼Œäºæ˜¯æˆ‘å°±å±ˆæœäº†ã€‚



* `fstream`æ“ä½œä¸ç”šç†Ÿæ‚‰

  æŠŠä¸€ä¸ª`object `çš„ä¿¡æ¯å†™å…¥æ–‡ä»¶æ˜¯ç®€å•è½»å¿«çš„ã€‚å›°éš¾åœ¨äºå¦‚ä½•æŠŠæ–‡ä»¶ä¸­çš„ä¿¡æ¯è¯»å–å‡ºæ¥å¹¶é‡æ–°ç”Ÿæˆä¸€ä¸ª`object`ã€‚è¿™æ¶‰åŠä¸€ä¸ªç¼–ç å’Œè§£ç çš„é—®é¢˜ï¼Œæˆ‘éœ€è¦æŒ‰ç…§ä¸€å®šçš„é¡ºåºè®°å½•ä¿¡æ¯ï¼Œå†æŒ‰ç…§ç›¸åŒçš„é¡ºåºè§£æä¿¡æ¯ã€‚æœ€å›°éš¾çš„åœ°æ–¹åœ¨äºç©ºæ ¼å’Œæ¢è¡Œç¬¦çš„ä¸å¯è§æ€§ã€‚åœ¨è¯»å–å®Œä¸€æ®µå­—ç¬¦ä¸²åè®¡ç®—æœºæ€æ ·æ‰èƒ½çŸ¥é“â€*è¿™ä¸ª`object`çš„ä¿¡æ¯å·²ç»è¶³å¤Ÿäº†ï¼Œä¸‹ä¸€ä¸²å­—ç¬¦ä¸²æ˜¯ä¸‹ä¸€ä½äººå‘˜çš„ä¿¡æ¯* â€œå‘¢ï¼Ÿæˆ‘æœ€åé‡‡ç”¨çš„æ–¹æ³•æ˜¯åœ¨ä¿å­˜ä¿¡æ¯çš„æ—¶å€™ä¸ºæ¯ä¸€æ¡ä¿¡æ¯å¢åŠ å¼€å§‹ç¬¦å’Œç»“æŸç¬¦ï¼Œå¼€å§‹ç¬¦æ˜¯`<æ•°å­—>+<äººå‘˜ç±»å‹>`çš„æ ¼å¼ï¼Œå‘Šè¯‰æœºå™¨ç°åœ¨è¯»å–çš„æ˜¯ä¸€ä¸ªä»€ä¹ˆäººå‘˜çš„ä¿¡æ¯ï¼Œä»è€Œç¡®å®šæ¯ä¸€æ®µå­—ç¬¦ä¸²çš„å«ä¹‰ï¼Œç»“æŸç¬¦æ˜¯`#\n`,å‘Šè¯‰è®¡ç®—æœºè¿™ä¸ªäººå‘˜çš„ä¿¡æ¯å·²ç»è¯»å®Œï¼Œå¹¶åº”è¯¥æ¢è¡Œäº†ã€‚å¼•å…¥ç»“æŸç¬¦`#`æé«˜äº†ç¨‹åºè¿è¡Œçš„æ•ˆç‡ï¼Œå› ä¸ºå½“è®¡ç®—æœºå‘ç°äººå‘˜ä¿¡æ¯ä¸åŒ¹é…æ—¶ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨å‡½æ•°`ifile.getline(str,1024,'#')`æ¥å¿«é€Ÿç»è¿‡è¿™ä¸€è¡Œè€Œä¸ç”Ÿæˆæ²¡æœ‰æ„ä¹‰çš„å¯¹è±¡ã€‚

  `C++`ä¸ºä»€ä¹ˆè¦æŠŠè¯»æ–‡ä»¶å’Œå†™æ–‡ä»¶ã€è¯»æ¨¡å¼å’Œå†™æ¨¡å¼åˆ†å¼€ï¼Ÿæ˜¯ä¸ºäº†å¢åŠ ç¨‹åºçš„è‡ªç”±åº¦ï¼Œä¿è¯æ–‡ä»¶å†…å®¹çš„å®‰å…¨å—ï¼Ÿåæ­£æˆ‘çš„æ–‡ä»¶å› æ­¤å˜å¾—ä¸æ€ä¹ˆå®‰å…¨äº†ã€‚åœ¨è¯»å’Œå†™çš„ä¸æ–­åˆ‡æ¢ä¸­ï¼ŒæŸæ¬¡ç¨‹åºçš„çªç„¶å´©æºƒå°±ç›´æ¥å¯¼è‡´äº†æ–‡ä»¶ä¿¡æ¯çš„å…¨éƒ¨ä¸¢å¤±ã€‚ä»æ­¤æˆ‘ä¹Ÿå…»æˆäº†æ–‡ä»¶å¤‡ä»½çš„å¥½ä¹ æƒ¯ã€‚åœ¨`modify_mode()`ä¿¡æ¯ä¿®æ”¹çš„æ¨¡å¼ä¸­ï¼Œæˆ‘éœ€è¦å…ˆè¯»å…¥æ‰€æœ‰ä¿¡æ¯ï¼Œè¿›è¡Œä¿¡æ¯åŒ¹é…ï¼Œå†é‡æ–°å†™ä¸Šä¿®æ”¹è¿‡åçš„ä¿¡æ¯ã€‚ç”±äºä¸åŒçš„äººå‘˜ç±»å…·æœ‰ä¸åŒçš„ä¿¡æ¯ç¼–ç æ ¼å¼ï¼Œå› æ­¤æˆ‘åœ¨æ¯ä¸€ä¸ªäººå‘˜ç±»ä¸­éƒ½å£°æ˜äº†å…¶ç‹¬æœ‰çš„`virtual void modify()`ã€‚è™½ç„¶è¯´ç¨‹åºè«åå…¶å¦™å°±æ‰§è¡ŒæˆåŠŸäº†ï¼Œä½†æˆ‘è§‰å¾—æˆ‘çš„`modify()`å‡½æ•°æ˜¯ååˆ†ä¸ä¼˜ç¾çš„ï¼Œå®ƒæ¥æ”¶äº†å¤ªå¤šå‚æ•°ï¼Œæ—¢æœ‰`int`ï¼Œä¹Ÿæœ‰`ofstream&`ï¼Œè¿™æ„å‘³ç€å®ƒä¸ä¸»æ“ä½œå‡½æ•°`modify_mode()`ç´§ç´§è”ç³»åœ¨äº†ä¸€èµ·ï¼Œè€Œæ ¹æœ¬ä¸å¯èƒ½ä½œä¸ºä¸€ä¸ªå‡½æ•°æ¥å£è¢«ç‹¬ç«‹åœ°è°ƒç”¨ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªå°è£…å¥½çš„ç±»è¯¥æœ‰çš„æ ·å­ã€‚æˆ‘ç”šè‡³åœ¨`modify()`å‡½æ•°ä¸­è¿›è¡Œäº†å·æ¢æ¢æŸ±ï¼šå…³é—­äº†ä¼ è¿›æ¥çš„`ofstream& ofile`æ–‡ä»¶ï¼ˆå†™æ¨¡å¼ï¼š`ios:trunc`ï¼‰ï¼Œå¹¶ä»¥å¦ä¸€ç§å†™æ¨¡å¼`ios::app`çš„æ–¹å¼é‡æ–°æ‰“å¼€å®ƒã€‚è¿™ç§æ“ä½œæ— ç–‘ä¹Ÿæ˜¯å¾ˆå±é™©çš„ï¼Œä½†ç”±äºæ—¶é—´ç´§è¿«ï¼Œä¸”`modify()`å‡½æ•°ä¸å¤ªå¤šå‡½æ•°æœ‰å…³è”ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼Œæ•…æ²¡æœ‰è¿›è¡Œæ”¹å–„ã€‚ç®—æ˜¯ä¸€å¤§é—æ†¾å§ã€‚

  

* è™šå‡½æ•° è™šåŸºç±» æŠ½è±¡ç±» æ··æ·†

  æ­¤ä¸‰è€…å¯è°“`C++`å¤šæ€æ€§çš„å¼ºå¤§å®ç°å·¥å…·ã€‚ä½†å¯¹å®ƒä»¬ä¸€çŸ¥åŠè§£å°±æ— è„‘è°ƒç”¨æ— ç–‘ä¼šå¯¼è‡´æ›´å¤šçš„ç—›è‹¦ã€‚

  å£°æ˜ä¸€ä¸ªè™šå‡½æ•°çš„ç›®çš„æ˜¯è®©æ´¾ç”Ÿç±»ç»§æ‰¿å…¶æ¥å£ä»¥åŠç¼ºçœçš„è¡Œä¸ºã€‚åŒåçš„æ¥å£é€šè¿‡è™šå‡½æ•°å¯ä»¥å®ç°éƒ¨åˆ†å†…å®¹çš„åˆ†ç¦»ã€‚å½“è™šå‡½æ•°ä¸ç±»æŒ‡é’ˆæ··åˆåœ¨ä¸€èµ·æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ··ä¹±ï¼Œæ¯”å¦‚ï¼šåŸºç±»æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œè°ƒç”¨çš„å°±æ˜¯åŸºç±»çš„å‡½æ•°ï¼›ä½†å¦‚æœæ˜¯è™šå‡½æ•°ï¼Œè°ƒç”¨çš„å°±æ˜¯æ´¾ç”Ÿç±»çš„è™šå‡½æ•°ï¼ˆå½“ç„¶ï¼ŒæŠ½è±¡ç±»ä¸­è‹¥å£°æ˜äº†ç›¸åº”çš„çº¯è™šå‡½æ•°ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰

  ä½œä¸ºä¸€ä¸ªåŸºç±»ï¼ŒæŠŠææ„å‡½æ•°å£°æ˜ä¸ºè™šå‡½æ•°æ˜¯æœ‰å¿…è¦çš„ã€‚å› ä¸ºè™šææ„å‡½æ•°ä½¿å¾—åœ¨åˆ é™¤æŒ‡å‘å­ç±»å¯¹è±¡çš„åŸºç±»æŒ‡é’ˆæ—¶å¯ä»¥è°ƒç”¨å­ç±»çš„ææ„å‡½æ•°è¾¾åˆ°é‡Šæ”¾å­ç±»ä¸­å †å†…å­˜çš„ç›®çš„ï¼Œä»è€Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚

  è™šåŸºç±»ä¸è™šå‡½æ•°ä¸åŒï¼Œå®ƒæ˜¯ä¸ºäº†è§£å†³å¤šé‡ç»§æ‰¿çš„é—®é¢˜ï¼Œé¿å…å‡ºç°ä¸¤ä»½ä¸åŒçš„åŸºç±»æ‹·è´ã€‚åœ¨å®šä¹‰æœ‰è™šåŸºç±»çš„æ´¾ç”Ÿç±»çš„æ—¶å€™ä¸€å®šè¦è®°å¾—åœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­é¦–å…ˆåˆå§‹åŒ–è™šåŸºç±»ï¼è¿™æ˜¯ä¸€ä¸ªéœ€è¦è®°ä½çš„ç‚¹ã€‚

  æŠ½è±¡ç±»è·Ÿå®ƒçš„åå­—ä¸€æ ·ï¼Œæ›´æ˜¯ä¸€ä¸ªç„ä¹‹åˆç„çš„ä¸œè¥¿ã€‚æˆ‘æœ€å¼€å§‹åœ¨æŠ½è±¡ç±»ä¸­å£°æ˜äº†`save()`å’Œ`modify()`ä¸¤ä¸ªçº¯è™šå‡½æ•°æ¥å£ï¼Œå¸Œæœ›åœ¨`add_mode()`å’Œ`modify_mode()`ä¸­é€šè¿‡æŠ½è±¡ç±»æŒ‡é’ˆ`abstract_human *pt = NULL` ç„¶å `pt = new <Class>()ï¼›pt->save();`è¿™æ ·çš„æ–¹æ³•æ¥ç»Ÿä¸€åœ°è°ƒç”¨è™šå‡½æ•°ã€‚ç»“æœç¼–è¯‘è¿‡äº†ï¼Œå´åœ¨`delete pt;`çš„è¿‡ç¨‹ä¸­è§¦å‘äº†å¼‚å¸¸æ–­ç‚¹(`æœªåŠ è½½wntdll`)ã€‚ç™¾æ€ä¸å¾—å…¶è§£ï¼Œåªèƒ½æ‰¾åŠ©æ•™è§£å†³ã€‚è¿™ä¸ªbugä¸€deå°±æ˜¯åŠå¤©ï¼Œæœ€åæ‰çŸ¥é“æŠ½è±¡ç±»`abstract_human()`éœ€è¦å®šä¹‰ä¸€ä¸ªè™šçš„ææ„å‡½æ•°ã€‚å› ä¸º`abstract_human()`æ˜¯ä½œä¸ºä¸€ä¸ªåŸºç±»å­˜åœ¨ï¼Œå¦‚æœå…¶ææ„å‡½æ•°ä¸æ˜¯è™šå‡½æ•°ï¼Œ`delete`çš„æ—¶å€™åªä¼šè°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°ï¼Œæˆ‘åœ¨æŠ½è±¡ç±»ä¸­å‹æ ¹å°±æ²¡æœ‰å®šä¹‰ææ„å‡½æ•°ï¼Œä¹Ÿæ²¡æœ‰æ•°æ®æˆå‘˜ï¼Œäºæ˜¯å°±ç›¸å½“äºä»€ä¹ˆéƒ½æ²¡æœ‰åˆ é™¤ï¼Œè‡ªç„¶ä¼šæŠ¥é”™ã€‚

  æˆ‘è§‰å¾—å¯ä»¥è¢«ç¼–è¯‘å™¨æ£€æŸ¥å‡ºæ¥çš„bugéƒ½ä¸æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œæ™ºèƒ½çš„VSç³»ç»Ÿå·²ç»æ˜ç¡®æŒ‡å‡ºäº†å‡ºé—®é¢˜çš„ä»£ç ä½ç½®å’Œé—®é¢˜ã€‚éš¾ä»¥å¤„ç†çš„æ˜¯*æœªå®šä¹‰è¡Œä¸º* ï¼Œç°åœ¨å¤§æ¦‚æ˜ç™½è¿™ä¸å†…å­˜ç©ºé—´ã€æŒ‡é’ˆç­‰é—®é¢˜æœ‰å…³ã€‚è‡³äº*è§¦å‘æ–­ç‚¹* çš„å¼‚å¸¸åªè§è¿‡ä¸€æ¬¡ï¼ˆæŠ½è±¡ç±»çš„ææ„å‡½æ•°ï¼‰ï¼Œè¿™ä¹Ÿä¸å†…å­˜æ³„æ¼ã€å †æ ˆæº¢å‡ºæœ‰å…³ã€‚ç®—æ˜¯åƒä¸€å ‘ï¼Œé•¿ä¸€æ™ºã€‚
  
  å•Šï¼ŒC++çœŸæ˜¯åšå¤§ç²¾æ·±ã€‚

## æµ‹è¯•ç»“æœåˆ†æ

æœ¬ç¨‹åºçš„æµ‹è¯•æ•°æ®æ–‡ä»¶ä¸º`å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt`ï¼Œæµ‹è¯•æƒ…å†µå¦‚ä¸‹ã€‚

* `å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt` å†…å®¹æˆªå›¾ï¼ˆæ­¤å¤„å§“åã€ç¼–å·åªæ˜¯èƒ¡ä¹±ç¼–å†™ï¼Œå¹¶æ²¡æœ‰ä»»ä½•å«ä¹‰ï¼Œè‹¥æœ‰å†’çŠ¯ï¼Œè¯·å¤šè§è°…ï¼‰

  <img src="C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723140233753.png" alt="image-20210723140233753" style="zoom:67%;" />

* æ‰“å¼€ç¨‹åºï¼Œæ˜¾ç¤ºä¸»ç•Œé¢ã€‚

  <img src="C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723135749563.png" alt="image-20210723135749563" style="zoom:67%;" />

* æŒ‰â€œ3â€ æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ã€‚

  * æ˜¾ç¤ºå…¨éƒ¨

  ![image-20210723140409272](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723140409272.png)

  * æŒ‰ä»»æ„é”®è¿”å›ä¸»ç•Œé¢å¹¶æ¸…å±ã€‚

  <img src="C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723140534998.png" alt="image-20210723140534998" style="zoom:67%;" />

* æŒ‰â€œ1â€ æ·»åŠ äººå‘˜

  * é€‰æ‹©å½•å…¥äººå‘˜ç±»åˆ«ã€‚

    <img src="C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723140713099.png" alt="image-20210723140713099"  />

  * åŠ©æ•™æœ€å¤æ‚ï¼Œæ•…é€‰æ‹©â€œ5â€ ä½œä¸ºç¤ºä¾‹ã€‚

    ![image-20210723140839528](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723140839528.png)

  * æŒ‰ç…§æç¤ºé€è¡Œè¾“å…¥ä¿¡æ¯ã€‚

    ![image-20210723141040997](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723141040997.png)

    ![image-20210728231557923](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210728231557923.png)

    å¦‚æœè¾“å…¥çš„ç”Ÿæ—¥æ—¥æœŸæˆ–è€…æ€§åˆ«ä¸åˆæ³•ï¼Œå°†è¢«è¦æ±‚é‡æ–°è¾“å…¥ã€‚

  * æ˜¾ç¤ºäº†ä¿å­˜çš„æ ¼å¼å¹¶æç¤ºæç¤ºä¿¡æ¯å·²ç»ä¿å­˜ã€‚æˆ‘ä»¬æ‰“å¼€å‚¨å­˜æ–‡ä»¶çœ‹ä¸€ä¸‹ã€‚å¤§æ¦‚ç¡®å‡¿æ˜¯å·²ç»ä¿å­˜ã€‚

    ![image-20210723141306849](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723141306849.png)

  * è¿”å›ä¸»ç•Œé¢åå† æŒ‰â€œ3â€ æ˜¾ç¤ºå…¨éƒ¨ä¿¡æ¯ã€‚å¯çŸ¥ç¡®å®å·²ç»ä¿å­˜ã€‚

    ![image-20210723141424091](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723141424091.png)

  

* æŒ‰â€œ2â€è¿›è¡Œæ•°æ®åˆ é™¤ã€‚ã€æ¥ä¸‹æ¥åªè¿›è¡Œæˆªå›¾ï¼Œä¸ä½œè¿‡å¤šæ–‡å­—é˜é‡Šã€‚ã€‘

  ![image-20210723141739344](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723141739344.png)

  ![image-20210723141814540](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723141814540.png)

  * 1.ç»§ç»­åˆ é™¤

    ![image-20210723141905899](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723141905899.png)

    * å…ˆé€‰æ‹©â€œNâ€

      ![image-20210723142014498](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723142014498.png)

    * å›åˆ°åˆ é™¤ç•Œé¢ï¼Œè¿™æ¬¡è¾“å…¥å­¦å·ã€‚

      ![image-20210723142100811](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723142100811.png)

      

    * Yesï¼

      ![image-20210723142206103](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723142206103.png)

      å¯¹åº”çš„é‚£ä¸€è¡Œè¢«åˆ é™¤äº†ã€‚

    * è¿”å›å¹¶æ˜¾ç¤ºå…¨éƒ¨ã€‚

      ![image-20210723142336732](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723142336732.png)

* æŒ‰â€œ4â€ æ•°æ®æŸ¥è¯¢

  ![image-20210723142527602](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723142527602.png)

  ![image-20210723142629437](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723142629437.png)

  ![image-20210723142713466](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723142713466.png)

  * ä¸ºæ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘ç»™æ•°æ®å‚¨å­˜æ–‡ä»¶æ·»åŠ ä¸€æ¡åŒåä¿¡æ¯ã€‚

    ![image-20210723142939067](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723142939067.png)

  * å†æ£€ç´¢ã€‚ï¼ˆåŒå/ åŒå­¦å·ï¼‰

    ![image-20210723143023675](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723143023675.png)

* æŒ‰â€œ5â€ æ•°æ®ä¿®æ”¹

  * ç¡®è®¤è¦ä¿®æ”¹çš„äººå¹¶è¿›å…¥ä¿®æ”¹æ¨¡å¼ã€‚

  ![image-20210723143329071](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723143329071.png)

  * æ”¹å°±å®Œäº†ã€‚

    ![image-20210723143535086](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723143535086.png)

  * æ˜¾ç¤ºå…¨éƒ¨ ç¡®è®¤ä¸€ä¸‹ã€‚

    ![image-20210723143619362](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723143619362.png)

    

    

* å¾ˆæ»¡æ„ï¼Œé‚æŒ‰6é€€å‡ºç¨‹åºã€‚

  ![image-20210723143920557](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723143920557.png)

  

## æ€»ç»“ä¸å±•æœ›

æœ¬ç³»ç»Ÿçš„è®¾è®¡æŠŠæˆ‘åœ¨è¿™ä¸€å¹´å­¦ä¹ çš„ç¨‹åºè®¾è®¡çŸ¥è¯†å…¨éƒ¨èä¼šè´¯é€šèµ·æ¥äº†ï¼Œæˆ‘å¯¹äºCçš„æŒ‡é’ˆç±»å‹ï¼Œå¯¹äºC++çš„æŠ½è±¡ã€å°è£…ã€ç»§æ‰¿å’Œå¤šæ€æœ‰äº†æ›´æ·±å…¥çš„ç†è§£ï¼Œå°¤å…¶æ˜¯ç»§æ‰¿ä¸å¤šæ€ã€‚æœ¬ç³»ç»Ÿå„ä¸ªæ¨¡å—çš„è®¾è®¡å…¶å®åœ¨é»„æ°¸å³°è€å¸ˆçš„ä½œä¸šä¸­å·²ç»æœ‰äº†é›å½¢ï¼Œä½†æ˜¯æ˜¯éå¸¸ç²—ç³™çš„ï¼Œå®Œå…¨æ²¡æœ‰ä½“ç°C++é¢å‘å¯¹è±¡çš„æ€æƒ³ã€‚åæ¥ä¾¿æ—§ç“¶è£…æ–°é…’ï¼Œå¼€å§‹äº†è¿™ä¸ªç³»ç»Ÿçš„å†æ¬¡è®¾è®¡ã€‚

æ¯”è¾ƒæ»¡æ„çš„åœ°æ–¹ï¼š

* è´¯å½»è½å®é¢å‘å¯¹è±¡æ€æƒ³ï¼Œä¸‡ç‰©çš†æ˜¯ç±»ï¼Œå¼‚å¸¸æ˜¯ç±»ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿæ˜¯ç±»ã€‚
* æé«˜äº†ä»£ç çš„ä¸“ä¸šç¨‹åº¦å’Œä¸¥è°¨ç¨‹åº¦ã€‚æ¯”å¦‚ç»™æ¯ä¸ªç±»éƒ½å®šä¹‰äº†èµ‹å€¼è¿ç®—ç¬¦å’Œå¤åˆ¶æ„é€ å‡½æ•°ï¼›åœ¨æ„é€ å‡½æ•°ä¸­æ‡‚å¾—æ´»ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼›é‡è½½äº†`operator<<`å’Œ`operator>>`ä½¿å¾—ä»£ç æ›´ä¼˜é›…ä¸”å®¹æ˜“ç†è§£ï¼›æ‡‚å¾—è¿ç”¨`inline`æå‡æ•ˆç‡ï¼›è¿ç”¨`const` ä¿è¯å°è£…æ€§ï¼›åœ¨å‚æ•°å’Œè¿”å›å€¼ä¸Šæ­£ç¡®é€‰æ‹©ä¼ å€¼æˆ–ä¼ å€ï¼Œç­‰ç­‰ã€‚
* å­¦ä¼šäº†å†™å¤´æ–‡ä»¶æŠŠæ¥å£ä¸å®ç°åˆ†ç¦»ã€‚æé«˜äº†ä»£ç çš„å¯è¯»æ€§ï¼Œåç»­çš„ç»´æŠ¤å’Œä¼˜åŒ–ä¹Ÿå˜å¾—ç®€å•äº†ã€‚

æœ‰å¾…æé«˜çš„åœ°æ–¹ï¼š

* ç³»ç»Ÿä»…å®ç°äº†è®°å½•åŠŸèƒ½ï¼Œæ²¡æœ‰å¼€å‘ç»Ÿè®¡åŠŸèƒ½ã€‚æˆ‘ä»¥ä¸ºæˆ‘è¿™ç§ç¼–ç å‚¨å­˜æ–¹å¼å¾ˆéš¾å®ç°ç»Ÿè®¡åŠŸèƒ½ã€‚å¦‚æœèƒ½å¼•å…¥**é“¾è¡¨**è¿›è¡Œå‚¨å­˜ï¼Œåœ¨æ¯ä¸€ä¸ªå¯¹è±¡ä¸­å‚¨å­˜ä¸€ä¸ª`next`æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªåŒç±»å¯¹è±¡ï¼Œåº”è¯¥å¯ä»¥æ–¹ä¾¿åœ°å®ç°ç»Ÿè®¡åŠŸèƒ½ã€‚
* å‡½æ•°æ¥å£çš„å¤ç”¨æ€§ä¸å¼ºï¼Œä»¥è‡³äºå¾ˆå¤šåœ°æ–¹ä»£ç é‡å¤ã€‚åƒæ˜¯`delete_mode()`ã€`search_mode()` å’Œ `modify_mode()` éƒ½åŒ…å«æ•°æ®æ£€ç´¢çš„è¿‡ç¨‹ï¼Œä½†å®ƒä»¬çš„æ•°æ®æ£€ç´¢ä»£ç éƒ½æ˜¯å„è‡ªç‹¬ç«‹çš„ï¼Œå› ä¸ºå…¶ä¸­ä¸€äº›å­—ç¬¦çš„æ˜¾ç¤ºå’Œè¿ç®—é€»è¾‘æœ‰æ‰€ä¸åŒã€‚å¦‚æœå¯ä»¥å†™å‡ºä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®æ£€ç´¢åˆ°çš„ä¸åŒå€¼ä¼ å›ä¸€ä¸ªå¯¹åº”çš„`object`çš„è¯ï¼Œåº”è¯¥æ˜¯å¯ä»¥å¤ç”¨çš„ï¼Œä½†æˆ‘ä¸ä¼šã€‚
* `modify()`å‡½æ•°ï¼Œçº¯ç²¹çš„é¢å‘è¿‡ç¨‹è®¾è®¡ã€‚å†™å¾—å¾ˆå·®ï¼Œæ ¹æœ¬ä¸é…è¢«ç§°ä¸ºæ¥å£ã€‚
* ç®—æ³•é€»è¾‘æœ‰å¾…æé«˜ï¼Œæˆ‘è§‰å¾—åƒä¿®æ”¹å¹¶å‚¨å­˜è¿™æ ·çš„è¿‡ç¨‹çš„å®ç°è¿˜æ˜¯å¤ªç²—é‡äº†ã€‚

å¸Œæœ›ä»¥åå¤šè¯»ä¹¦ï¼Œå¤šå†™ä»£ç ï¼Œå†™å‡ºæ›´é«˜è´¨é‡çš„ä»£ç ã€‚

## é™„å½•1ï¼š æºç¨‹åºæ¸…å•

### ä¸»è¦äººå‘˜ç»“æ„

#### æŠ½è±¡ç±» abstract_human.h

```c++
//æŠ½è±¡ç±»ä¸€èˆ¬ä¸åŒ…å«æ•°æ®æˆå‘˜ï¼Œåªæä¾›æ¥å£
#include<string>
#include<fstream>
#pragma once

#ifndef abstract_human_H
#define abstract_human_H

using namespace std;

class abstract_human
{
public:
	virtual ~abstract_human() {};  //å²è¯—çº§debugçš„ç»“æœï¼æŠ½è±¡ç±»é‡Œé¢è¦åŠ è™šææ„å‡½æ•°æ‰å¯ä»¥deleteï¼
	virtual void save() = 0;
	virtual void modify(int target, int i, int line_num, string* line, std::ofstream& file) = 0;
};

#endif // !abstract_human_H

```

#### people.h

```c++
#pragma once
#include"abstract_human.h"
#include"date.h"
#include<iostream>
#include<string>
#include<fstream>

//People ç±»çš„å£°æ˜
//People ä¸ºåŸºæœ¬äººå‘˜ç±»ï¼Œç§æœ‰æ•°æ®æˆå‘˜è¾ƒå°‘ï¼Œå¯ä½œä¸ºåç»­ç±»åˆ«æ´¾ç”Ÿçš„åŸºç±»ã€‚

#ifndef PEOPLE_H
#define PEOPLE_H
class People:virtual public abstract_human
{
public:
	People(string nm , string num , string sx , int yy, int mm, int dd);
	People();
	People(const People& rhs);
	virtual ~People();
	People& operator= (const People& rhs);
	friend std::ostream& operator<<(std::ostream&, const People&);
	virtual void save();
	virtual void modify(int target, int i, int line_num, string* line,std::ofstream& file);
protected:
	string name;
	string number;
	string sex;
	Date birthday;
};
#endif // !PEOPLE_H

```

#### people.cpp

```c++
#include"people.h"
#include"FileErr.h"

#include<iostream>
#include<strstream>
#include<fstream>
#include<string>
#include<iomanip>
#include<conio.h>
#pragma warning(disable : 4996)
using namespace std;

//æœ‰å‚æ„é€ å‡½æ•°
//å‚æ•°ï¼šå§“åã€å­¦å·ã€æ€§åˆ«
//ç”Ÿæˆä¸€ä¸ªåŸºæœ¬äººå‘˜ç±»å¯¹è±¡
People::People(string nm, string num, string sx, int yy, int mm, int dd) :
	name(nm), number(num),sex(sx), birthday(yy,mm,dd)
{ }

//æ— å‚æ„é€ å‡½æ•°
//å‚æ•°ï¼šNone
//é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å‡½æ•°ä½¿clientå¯ä»¥ç›´æ¥åœ¨æ“ä½œç³»ç»Ÿä¸­æ„é€ æƒ³è¦çš„å¯¹è±¡ã€‚
People::People()
{
	cout << "è¯·è¾“å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š" << endl;
	cout << "å§“åï¼š"; cin >> name;
	cout << "ç¼–å·ï¼š"; cin >> number;
	cout << "æ€§åˆ«ï¼š"; cin >> sex;
	while (sex != "ç”·" && sex != "å¥³")
	{
		cout << "æ€§åˆ«ä¸åˆæ³•ï¼è¯·è¾“å…¥â€œç”·â€æˆ–â€œå¥³â€\n æ€§åˆ«ï¼š" << endl;
		cin >> sex;
	}
	cout << "ç”Ÿæ—¥ï¼š"; cin >> birthday;
}

//ææ„å‡½æ•°
//å‚æ•°ï¼šnone
//é‡Šæ”¾è¯¥å¯¹è±¡çš„å†…å­˜å¹¶æ‰“å°æç¤º
People::~People() {}

//å¤åˆ¶æ„é€ å‡½æ•°
//å‚æ•°ï¼šä¸€ä¸ªå¸¸å¯¹è±¡çš„å¼•ç”¨ const People&rhs
//é€šè¿‡ä¸€ä¸ªå·²æœ‰å¯¹è±¡å¯¹å¦ä¸€ä¸ªå·²æœ‰å¯¹è±¡èµ‹å€¼
//returnï¼šå¤åˆ¶åçš„æ–°å¯¹è±¡
People::People(const People& rhs)
{
	name = rhs.name;
	number = rhs.number;
	sex = rhs.sex;
	birthday = rhs.birthday;
};
 
//èµ‹å€¼è¿ç®—ç¬¦çš„é‡è½½
//å‚æ•°ï¼šä¸€ä¸ªå¸¸å¯¹è±¡çš„å¼•ç”¨ const People&rhs
//é€šè¿‡ä¸€ä¸ªå·²æœ‰å¯¹è±¡å¯¹å¦ä¸€ä¸ªå·²æœ‰å¯¹è±¡èµ‹å€¼
//returnï¼šé€šè¿‡ä¼ å€æ–¹å¼è¿”å›æ–°çš„åŸæœ‰å¯¹è±¡
People& People::operator= (const People& rhs)
{
	if (this == &rhs) return *this;
	name = rhs.name;
	number = rhs.number;
	sex = rhs.sex;
	birthday = rhs.birthday;
	return *this;
};

void People::save()
{
	
	char c[80];
	ostrstream strout(c, 80);
	try
	{
		ofstream ofile("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::app);
		if (!ofile) throw (FileErr());
		else
		{
			strout << "1æ— ç±»åˆ« " << this->name << setw(8)<<" " <<this->number <<" " << this->sex << " "<< this->birthday << " " << "#" << endl;
			strout << ends;
			cout << c;//è°ƒè¯•
			ofile << c;
			cout << "ä¿¡æ¯ä¿å­˜æˆåŠŸã€‚" << endl;
			ofile.close();
		}
	}
	catch (FileErr E)
	{
		E.reasonopen();
		cout << "æŒ‰ä»»æ„é”®è¿”å›ã€‚" << endl;
		char c=getch();
	}
	
}

//æµè¾“å‡ºè¿ç®—ç¬¦é‡è½½
//å‚æ•°ï¼šoutputï¼šè¾“å‡ºæµã€rhsï¼šç›®æ ‡People object
//returnï¼šostream& è¿”å›è¾“å‡ºæµæœ¬èº«ã€‚
ostream& operator<<(ostream& output, const People&rhs)
{
	output << "å§“åï¼š" << rhs.name << endl;
	output << "ç¼–å·ï¼š" << rhs.number << endl;
	output << "æ€§åˆ«ï¼š" << rhs.sex << endl;
	output << "ç”Ÿæ—¥ï¼š" << rhs.birthday << endl;
	return output;
}

//ä¿®æ”¹å¯¹è±¡ä¿å­˜å‡½æ•°
//å‚æ•°ï¼štargetï¼šç”¨æ¥å‚¨å­˜å¯¹è±¡æ‰€åœ¨æ–‡ä»¶è¡Œæ•°/ iï¼šç›®æ ‡æ–‡ä»¶æ‰€åœ¨çš„è¡Œæ•° / line_num:æ€»è¡Œæ•° / lineï¼šstringç±»æ•°ç»„æŒ‡é’ˆ åˆ†åˆ«å‚¨å­˜äº†æ–‡ä»¶ä¸­æ¯ä¸€è¡Œçš„å­—ç¬¦ä¸² / ofile:è¾“å‡ºæµæ–‡ä»¶
//åœ¨modifymode()ä¸­è°ƒç”¨æ­¤å‡½æ•°ï¼Œå¯ä»¥æŠŠä¿®æ”¹è¿‡çš„å¯¹è±¡å­˜å…¥txtæ–‡ä»¶ä¸­ã€‚
// ç”¨äºä¿å­˜ï¼Œå¹¶éç”¨äºä¿®æ”¹ã€‚
//return: æ— 

void People::modify(int target, int i, int line_num,string* line ,ofstream& ofile)
{
	
	target = i;
	for (i = 0; i < line_num; i++)
	{
		if (i != target) ofile << *(line + i) << endl;
		else
		{
			ofile.close();
			this->save();
			ofile.open("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::app);
			continue;
		}
	}
	cout << "æ–°ä¿¡æ¯å·²ä¿å­˜ã€‚" << endl;
}
```

#### student.h

```c++
#pragma once
#include"people.h"
#include"date.h"

#ifndef STUDENT_H
#define STUDENT_H

#include<String>
#include<iostream>
#include<fstream>
using namespace std;

class Student : virtual public People
{
public:
	Student(string nm, string num, string sx, int yy, int mm, int dd, string clno);
	Student();
	Student(const Student& rhs);
	virtual ~Student();
	Student& operator= (const Student& rhs);
	friend ostream& operator<<(ostream&, const Student& rhs);
	virtual void save();
	virtual void modify(int target, int i, int line_num, string* line, std::ofstream& file);
protected:
	string classno;
};
#endif
```

#### student.cpp

```c++
#include "student.h"//å®ç°æ–‡ä»¶ä¸­éœ€è¦æŠŠåŸºç±»çš„å¤´æ–‡ä»¶ä¹ŸImportäº†
#include"FileErr.h"

#include<iostream>
#include<fstream>
#include<strstream>
#include<iomanip>
#include<conio.h>
#include<string>

#pragma warning(disable:4996)

//æœ‰å‚æ„é€ å‡½æ•°
//å‚æ•°ï¼šå§“åã€å­¦å·ã€æ€§åˆ«ã€ç­åˆ«
//ç”Ÿæˆä¸€ä¸ªå­¦ç”Ÿç±»å¯¹è±¡
Student::Student(string nm, string num, string sx, int yy, int mm, int dd, string clno) :
	People(nm, num, sx, yy, mm, dd), classno(clno)
{}
Student::~Student() {}

//æ— å‚æ„é€ å‡½æ•°
//å‚æ•°ï¼šNone
//é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å‡½æ•°ä½¿clientå¯ä»¥ç›´æ¥åœ¨æ“ä½œç³»ç»Ÿä¸­æ„é€ æƒ³è¦çš„å¯¹è±¡ã€‚
Student::Student() :People()
{
	cout << "ç­åˆ«ï¼š"; cin >> classno;
}

//å¤åˆ¶æ„é€ å‡½æ•°
Student::Student(const Student& rhs) :People(rhs)
{
	classno = rhs.classno;
};

//èµ‹å€¼è¿ç®—ç¬¦çš„é‡è½½
//å‚æ•°ï¼šä¸€ä¸ªå¸¸å¯¹è±¡çš„å¼•ç”¨ const People&rhs
//é€šè¿‡ä¸€ä¸ªå·²æœ‰å¯¹è±¡å¯¹å¦ä¸€ä¸ªå·²æœ‰å¯¹è±¡èµ‹å€¼
//returnï¼šé€šè¿‡ä¼ å€æ–¹å¼è¿”å›æ–°çš„åŸæœ‰å¯¹è±¡
Student& Student::operator= (const Student& rhs)
{
	if (this == &rhs) return *this;
	name = rhs.name;
	number = rhs.number;
	sex = rhs.sex;
	birthday = rhs.birthday;
	classno = rhs.classno;
	return *this;
}

//æµè¾“å‡ºè¿ç®—ç¬¦é‡è½½
//å‚æ•°ï¼šoutputï¼šè¾“å‡ºæµã€rhsï¼šç›®æ ‡People object
//returnï¼šostream& è¿”å›è¾“å‡ºæµæœ¬èº«ã€‚
ostream& operator<<(ostream& output, const Student& rhs)
{
	output << "å§“åï¼š" << rhs.name << endl;
	output << "å­¦å·ï¼š" << rhs.number << endl;
	output << "æ€§åˆ«ï¼š" << rhs.sex << endl;
	output << "ç”Ÿæ—¥ï¼š" << rhs.birthday << endl;
	output << "ç­åˆ«ï¼š" << rhs.classno << endl;
	return output;
}

void Student::save()
{
	char c[80];
	ostrstream strout(c, 80);
	try
	{
		ofstream ofile("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::app);
		if (!ofile) throw (FileErr());
		else
		{
			strout << "2å­¦ç”Ÿ " << this->name << setw(8) << " " << this->number << " " << this->sex << " " << this->birthday << " " << this->classno << " " << "#" << endl;
			strout << ends;
			cout << c;//è°ƒè¯•
			ofile << c;
			cout << "ä¿¡æ¯ä¿å­˜æˆåŠŸã€‚" << endl;
			ofile.close();
		}
	}
	catch (FileErr E)
	{
		E.reasonopen();
		cout << "æŒ‰ä»»æ„é”®è¿”å›ã€‚" << endl;
		char c = getch();
	}
}
//ä¿®æ”¹å¯¹è±¡ä¿å­˜å‡½æ•°
//å‚æ•°ï¼štargetï¼šç”¨æ¥å‚¨å­˜å¯¹è±¡æ‰€åœ¨æ–‡ä»¶è¡Œæ•°/ iï¼šç›®æ ‡æ–‡ä»¶æ‰€åœ¨çš„è¡Œæ•° / line_num:æ€»è¡Œæ•° / lineï¼šstringç±»æ•°ç»„æŒ‡é’ˆ åˆ†åˆ«å‚¨å­˜äº†æ–‡ä»¶ä¸­æ¯ä¸€è¡Œçš„å­—ç¬¦ä¸² / ofile:è¾“å‡ºæµæ–‡ä»¶
//åœ¨modifymode()ä¸­è°ƒç”¨æ­¤å‡½æ•°ï¼Œå¯ä»¥æŠŠä¿®æ”¹è¿‡çš„å¯¹è±¡å­˜å…¥txtæ–‡ä»¶ä¸­ã€‚
// ç”¨äºä¿å­˜ï¼Œå¹¶éç”¨äºä¿®æ”¹ã€‚
//return: æ— 
void Student::modify(int target, int i, int line_num, string* line, ofstream& ofile)
{
	target = i;
	for (i = 0; i < line_num; i++)
	{
		if (i != target) ofile << *(line + i) << endl;
		else
		{
			ofile.close();
			this->save();
			ofile.open("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::app);
			continue;
		}
	}
	cout << "æ–°ä¿¡æ¯å·²ä¿å­˜ã€‚" << endl;
}
```

#### graduate.h

```c++
#pragma once
#include"student.h"
#include"date.h"

#ifndef Graduate_H
#define Graduate_H

#include<String>
#include<iostream>
#include<fstream>
using namespace std;

class Graduate :  public Student
{
public:
	Graduate(string nm, string num, string sx, int yy, int mm, int dd, string clno, string sub);
	Graduate();
	Graduate(const Graduate& rhs);
	virtual ~Graduate();
	Graduate& operator= (const Graduate& rhs);
	friend ostream& operator<<(ostream&, const Graduate& rhs);
	virtual void save();
	virtual void modify(int target, int i, int line_num, string* line, std::ofstream& file);
protected:
	string subject;
};


#endif


```

#### graduate.cpp

```c++
#include "Graduate.h"//å®ç°æ–‡ä»¶ä¸­éœ€è¦æŠŠåŸºç±»çš„å¤´æ–‡ä»¶ä¹ŸImportäº†
#include"FileErr.h"

#include<iostream>
#include<fstream>
#include<strstream>
#include<iomanip>
#include<conio.h>
#include<string>

#pragma warning(disable:4996)

//æœ‰å‚æ„é€ å‡½æ•°
//å‚æ•°ï¼šå§“åã€å­¦å·ã€æ€§åˆ«ã€ç­åˆ«
//ç”Ÿæˆä¸€ä¸ªç ”ç©¶ç”Ÿç±»å¯¹è±¡
Graduate::Graduate(string nm, string num, string sx, int yy, int mm, int dd, string clno, string sub) :
	People(nm,num,sx,yy,mm,dd),Student(nm, num, sx, yy, mm, dd,clno), subject(sub)
{}
Graduate::~Graduate() {}

//æ— å‚æ„é€ å‡½æ•°
//å‚æ•°ï¼šNone
//é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å‡½æ•°ä½¿clientå¯ä»¥ç›´æ¥åœ¨æ“ä½œç³»ç»Ÿä¸­æ„é€ æƒ³è¦çš„å¯¹è±¡ã€‚
Graduate::Graduate() :People(),Student()
{
	cout << "ä¸“ä¸šï¼š"; cin >> subject;
}

//å¤åˆ¶æ„é€ å‡½æ•°
Graduate::Graduate(const Graduate& rhs) :Student(rhs)
{
	subject = rhs.subject;
};

//èµ‹å€¼è¿ç®—ç¬¦çš„é‡è½½
//å‚æ•°ï¼šä¸€ä¸ªå¸¸å¯¹è±¡çš„å¼•ç”¨ const Student&rhs
//é€šè¿‡ä¸€ä¸ªå·²æœ‰å¯¹è±¡å¯¹å¦ä¸€ä¸ªå·²æœ‰å¯¹è±¡èµ‹å€¼
//returnï¼šé€šè¿‡ä¼ å€æ–¹å¼è¿”å›æ–°çš„åŸæœ‰å¯¹è±¡
Graduate& Graduate::operator= (const Graduate& rhs)
{
	if (this == &rhs) return *this;
	name = rhs.name;
	number = rhs.number;
	sex = rhs.sex;
	birthday = rhs.birthday;
	classno = rhs.classno;
	subject = rhs.subject;
	return *this;
}

//æµè¾“å‡ºè¿ç®—ç¬¦é‡è½½
//å‚æ•°ï¼šoutputï¼šè¾“å‡ºæµã€rhsï¼šç›®æ ‡Student object
//returnï¼šostream& è¿”å›è¾“å‡ºæµæœ¬èº«ã€‚
ostream& operator<<(ostream& output, const Graduate& rhs)
{
	output << "å§“åï¼š" << rhs.name << endl;
	output << "å­¦å·ï¼š" << rhs.number << endl;
	output << "æ€§åˆ«ï¼š" << rhs.sex << endl;
	output << "ç”Ÿæ—¥ï¼š" << rhs.birthday << endl;
	output << "ç­åˆ«ï¼š" << rhs.classno << endl;
	output << "å­¦ç§‘ï¼š" << rhs.subject << endl;
	return output;
}
//å¯¹è±¡ä¿å­˜å‡½æ•°
//å‚æ•°ï¼šæ— 
//åœ¨å‡½æ•°ä½“ä¸­æŠŠæ­¤å¯¹è±¡çš„å„ä¸ªä¿¡æ¯å‚¨å­˜åˆ°æ–‡ä»¶â€œå­¦æ ¡äººäº‹ç®¡ç†ç³»ç»Ÿ.txtâ€ä¸­
//return: æ— 

void Graduate::save()
{
	char c[80];
	ostrstream strout(c, 80);
	try
	{
		ofstream ofile("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::app);
		if (!ofile) throw (FileErr());
		else
		{
			strout << "3ç ”ç©¶ç”Ÿ " << this->name << setw(8) << " " << this->number << " " << this->sex << " " << this->birthday << " " << this->classno << " " << this->subject<<" "<<"#" << endl;
			strout << ends;
			cout << c;//è°ƒè¯•
			ofile << c;
			cout << "ä¿¡æ¯ä¿å­˜æˆåŠŸã€‚" << endl;
			ofile.close();
		}
	}
	catch (FileErr E)
	{
		E.reasonopen();
		cout << "æŒ‰ä»»æ„é”®è¿”å›ã€‚" << endl;
		char c = getch();
	}
}

//ä¿®æ”¹å¯¹è±¡ä¿å­˜å‡½æ•°
//å‚æ•°ï¼štargetï¼šç”¨æ¥å‚¨å­˜å¯¹è±¡æ‰€åœ¨æ–‡ä»¶è¡Œæ•°/ iï¼šç›®æ ‡æ–‡ä»¶æ‰€åœ¨çš„è¡Œæ•° / line_num:æ€»è¡Œæ•° / lineï¼šstringç±»æ•°ç»„æŒ‡é’ˆ åˆ†åˆ«å‚¨å­˜äº†æ–‡ä»¶ä¸­æ¯ä¸€è¡Œçš„å­—ç¬¦ä¸² / ofile:è¾“å‡ºæµæ–‡ä»¶
//åœ¨modifymode()ä¸­è°ƒç”¨æ­¤å‡½æ•°ï¼Œå¯ä»¥æŠŠä¿®æ”¹è¿‡çš„å¯¹è±¡å­˜å…¥txtæ–‡ä»¶ä¸­ã€‚
// ç”¨äºä¿å­˜ï¼Œå¹¶éç”¨äºä¿®æ”¹ã€‚
//return: æ— 

void Graduate::modify(int target, int i, int line_num, string* line, ofstream& ofile)
{
	target = i;
	for (i = 0; i < line_num; i++)
	{
		if (i != target) ofile << *(line + i) << endl;
		else
		{
			ofile.close();
			this->save();
			ofile.open("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::app);
			continue;
		}
	}
	cout << "æ–°ä¿¡æ¯å·²ä¿å­˜" << endl;
}
```

#### teacher.h

```c++
#pragma once
#include"people.h"
#include"date.h"
#include<iostream>
#include<string>
#include<fstream>

//Teacher ç±»çš„å£°æ˜
//Teacher ä¸ºæ•™èŒå·¥ç±»ï¼Œç”±Peopleç±»æ´¾ç”Ÿè€Œæ¥ï¼Œå…·æœ‰èŒä½ï¼ˆprincipalï¼‰å’Œéƒ¨é—¨ï¼ˆdepartmentï¼‰çš„ç§æœ‰æ•°æ®æˆå‘˜

#ifndef TEACHER_H
#define TEACHER_H
class Teacher :virtual public People
{
public:
	Teacher(string nm, string num, string sx, int yy, int mm, int dd, string department, string principal);
	Teacher();
	Teacher(const Teacher& rhs);
	virtual ~Teacher();
	Teacher& operator= (const Teacher& rhs);
	friend std::ostream& operator<<(std::ostream&, const Teacher&);
	virtual void save();
	virtual void modify(int target, int i, int line_num, string* line, std::ofstream& file);
protected:
	string department;
	string principal;
};



#endif // !TEACHER_H
```

#### teacher.cpp

```c++
#include "teacher.h"//å®ç°æ–‡ä»¶ä¸­éœ€è¦æŠŠåŸºç±»çš„å¤´æ–‡ä»¶ä¹ŸImportäº†
#include"FileErr.h"

#include<iostream>
#include<fstream>
#include<strstream>
#include<iomanip>
#include<conio.h>
#include<string>

#pragma warning(disable:4996)

//æœ‰å‚æ„é€ å‡½æ•°
//å‚æ•°ï¼šå§“åã€å­¦å·ã€æ€§åˆ«ã€èŒä½ã€éƒ¨é—¨
//ç”Ÿæˆä¸€ä¸ªæ•™èŒäººå‘˜ç±»å¯¹è±¡
Teacher::Teacher(string nm, string num, string sx, int yy, int mm, int dd, string dpmt, string prcpl) :
	People(nm, num, sx, yy, mm, dd), department(dpmt),principal(prcpl){ }

//ææ„å‡½æ•°
Teacher::~Teacher() {  }

//æ— å‚æ„é€ å‡½æ•°
//å‚æ•°ï¼šNone
//é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å‡½æ•°ä½¿clientå¯ä»¥ç›´æ¥åœ¨æ“ä½œç³»ç»Ÿä¸­æ„é€ æƒ³è¦çš„å¯¹è±¡ã€‚
Teacher::Teacher() :People()
{
	cout << "éƒ¨é—¨ï¼š"; cin >> department;
	cout << "èŒåŠ¡ï¼š"; cin >> principal;
}

//å¤åˆ¶æ„é€ å‡½æ•°
Teacher::Teacher(const Teacher& rhs) :People(rhs)
{
	department = rhs.department;
	principal = rhs.principal;
};

//èµ‹å€¼è¿ç®—ç¬¦çš„é‡è½½
//å‚æ•°ï¼šä¸€ä¸ªå¸¸å¯¹è±¡çš„å¼•ç”¨ const People&rhs
//é€šè¿‡ä¸€ä¸ªå·²æœ‰å¯¹è±¡å¯¹å¦ä¸€ä¸ªå·²æœ‰å¯¹è±¡èµ‹å€¼
//returnï¼šé€šè¿‡ä¼ å€æ–¹å¼è¿”å›æ–°çš„åŸæœ‰å¯¹è±¡
Teacher& Teacher::operator= (const Teacher& rhs)
{
	if (this == &rhs) return *this;
	name = rhs.name;
	number = rhs.number;
	sex = rhs.sex;
	birthday = rhs.birthday;
	department = rhs.department;
	principal = rhs.principal;
	return *this;
}

//æµè¾“å‡ºè¿ç®—ç¬¦é‡è½½
//å‚æ•°ï¼šoutputï¼šè¾“å‡ºæµã€rhsï¼šç›®æ ‡People object
//returnï¼šostream& è¿”å›è¾“å‡ºæµæœ¬èº«ã€‚
ostream& operator<<(ostream& output, const Teacher& rhs)
{
	output << "å§“åï¼š" << rhs.name << endl;
	output << "å­¦å·ï¼š" << rhs.number << endl;
	output << "æ€§åˆ«ï¼š" << rhs.sex << endl;
	output << "ç”Ÿæ—¥ï¼š" << rhs.birthday << endl;
	output << "éƒ¨é—¨ï¼š" << rhs.department << endl;
	output << "èŒåŠ¡ï¼š" << rhs.principal << endl;
	return output;
}

void Teacher::save()
{
	char c[80];
	ostrstream strout(c, 80);
	try
	{
		ofstream ofile("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::app);
		if (!ofile) throw (FileErr());
		else
		{
			strout << "4æ•™èŒäººå‘˜ " << this->name << setw(8) << " " << this->number << " " << this->sex << " " << this->birthday << " " << this->department << " "<<this->principal<<" " << "#" << endl;
			strout << ends;
			cout << c;//è°ƒè¯•
			ofile << c;
			cout << "ä¿¡æ¯ä¿å­˜æˆåŠŸã€‚" << endl;
			ofile.close();
		}
	}
	catch (FileErr E)
	{
		E.reasonopen();
		cout << "æŒ‰ä»»æ„é”®è¿”å›ã€‚" << endl;
		char c = getch();
	}
}
//ä¿®æ”¹å¯¹è±¡ä¿å­˜å‡½æ•°
//å‚æ•°ï¼štargetï¼šç”¨æ¥å‚¨å­˜å¯¹è±¡æ‰€åœ¨æ–‡ä»¶è¡Œæ•°/ iï¼šç›®æ ‡æ–‡ä»¶æ‰€åœ¨çš„è¡Œæ•° / line_num:æ€»è¡Œæ•° / lineï¼šstringç±»æ•°ç»„æŒ‡é’ˆ åˆ†åˆ«å‚¨å­˜äº†æ–‡ä»¶ä¸­æ¯ä¸€è¡Œçš„å­—ç¬¦ä¸² / ofile:è¾“å‡ºæµæ–‡ä»¶
//åœ¨modifymode()ä¸­è°ƒç”¨æ­¤å‡½æ•°ï¼Œå¯ä»¥æŠŠä¿®æ”¹è¿‡çš„å¯¹è±¡å­˜å…¥txtæ–‡ä»¶ä¸­ã€‚
// ç”¨äºä¿å­˜ï¼Œå¹¶éç”¨äºä¿®æ”¹ã€‚
//return: æ— 
void Teacher::modify(int target, int i, int line_num, string* line, std::ofstream& ofile)
{
	
	target = i;
	for (i = 0; i < line_num; i++)
	{
		if (i != target) ofile << *(line + i) << endl;
		else
		{
			ofile.close();
			this->save();
			ofile.open("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::app);
			continue;
		}
	}
	cout << "æ–°ä¿¡æ¯å·²ä¿å­˜ã€‚" << endl;
}
```

#### TA.h

```c++
#pragma once
#include"teacher.h"
#include"graduate.h"
#include"date.h"

#ifndef TA_H
#define TA_H

#include<String>
#include<iostream>
#include<fstream>
using namespace std;

class TA : public Graduate, public Teacher
{
public:
	TA(string nm, string num, string sx, int yy, int mm, int dd, string clno, string subj, string department, string principal);
	TA();
	TA(const TA& rhs);
	~TA();
	TA& operator= (const TA& rhs);
	friend ostream& operator<<(ostream&, const TA& rhs);
	virtual void save();
	virtual void modify(int target, int i, int line_num, string* line, std::ofstream& file);
};

#endif

```

#### TA.cpp

```c++
#include "TA.h"//å®ç°æ–‡ä»¶ä¸­éœ€è¦æŠŠåŸºç±»çš„å¤´æ–‡ä»¶ä¹ŸImportäº†
#include"FileErr.h"

#include<iostream>
#include<fstream>
#include<strstream>
#include<iomanip>
#include<conio.h>
#include<string>

#pragma warning(disable:4996)

//æœ‰å‚æ„é€ å‡½æ•°
//å‚æ•°ï¼šå§“åã€å­¦å·ã€æ€§åˆ«ã€ç­åˆ«
//ç”Ÿæˆä¸€ä¸ªç ”ç©¶ç”Ÿç±»å¯¹è±¡
TA::TA(string nm, string num, string sx, int yy, int mm, int dd, string clno, string sub, string dpmt, string prin) :
	People(nm, num, sx, yy, mm, dd), Graduate(nm, num, sx,yy,mm,dd,clno,sub), Teacher(nm,num,sx,yy,mm,dd,dpmt, prin)
{}

TA::~TA() {}

//æ— å‚æ„é€ å‡½æ•°
//å‚æ•°ï¼šNone
//é€šè¿‡è°ƒç”¨æ— å‚æ„é€ å‡½æ•°ä½¿clientå¯ä»¥ç›´æ¥åœ¨æ“ä½œç³»ç»Ÿä¸­æ„é€ æƒ³è¦çš„å¯¹è±¡ã€‚
TA::TA() :People(),Graduate(),Teacher()
{ }

//å¤åˆ¶æ„é€ å‡½æ•°
TA::TA(const TA& rhs) :People(rhs),Graduate(rhs),Teacher(rhs)
{ };

//èµ‹å€¼è¿ç®—ç¬¦çš„é‡è½½
//å‚æ•°ï¼šä¸€ä¸ªå¸¸å¯¹è±¡çš„å¼•ç”¨ const Graduate&rhs
//é€šè¿‡ä¸€ä¸ªå·²æœ‰å¯¹è±¡å¯¹å¦ä¸€ä¸ªå·²æœ‰å¯¹è±¡èµ‹å€¼
//returnï¼šé€šè¿‡ä¼ å€æ–¹å¼è¿”å›æ–°çš„åŸæœ‰å¯¹è±¡
TA& TA::operator= (const TA& rhs)
{
	if (this == &rhs) return *this;
	name = rhs.name;
	number = rhs.number;
	sex = rhs.sex;
	birthday = rhs.birthday;
	classno = rhs.classno;
	subject = rhs.subject;
	department = rhs.department;
	principal = rhs.principal;
	return *this;
}

//æµè¾“å‡ºè¿ç®—ç¬¦é‡è½½
//å‚æ•°ï¼šoutputï¼šè¾“å‡ºæµã€rhsï¼šç›®æ ‡Graduate object
//returnï¼šostream& è¿”å›è¾“å‡ºæµæœ¬èº«ã€‚
ostream& operator<<(ostream& output, const TA& rhs)
{
	output << "å§“åï¼š" << rhs.name << endl;
	output << "å­¦å·ï¼š" << rhs.number << endl;
	output << "æ€§åˆ«ï¼š" << rhs.sex << endl;
	output << "ç”Ÿæ—¥ï¼š" << rhs.birthday << endl;
	output << "ç­åˆ«ï¼š" << rhs.classno << endl;
	output << "ç§‘ç›®ï¼š" << rhs.subject << endl;
	output << "éƒ¨é—¨ï¼š" << rhs.department << endl;
	output << "èŒåŠ¡ï¼š" << rhs.principal << endl;
	return output;
}
//å¯¹è±¡ä¿å­˜å‡½æ•°
//å‚æ•°ï¼šæ— 
//åœ¨å‡½æ•°ä½“ä¸­æŠŠæ­¤å¯¹è±¡çš„å„ä¸ªä¿¡æ¯å‚¨å­˜åˆ°æ–‡ä»¶â€œå­¦æ ¡äººäº‹ç®¡ç†ç³»ç»Ÿ.txtâ€ä¸­
//return: æ— 

void TA::save()
{
	char c[80];
	ostrstream strout(c, 80);
	try
	{
		ofstream ofile("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::app);
		if (!ofile) throw (FileErr());
		else
		{
			strout << "5åŠ©æ•™ " << this->name << setw(8) << " " << this->number << " " 
				<< this->sex << " " << this->birthday << " " << this->classno << " "
				<< this->subject << " " << this->department << " " << this->principal << " " << "#" << endl;
			strout << ends;
			cout << c;//è°ƒè¯•
			ofile << c;
			cout << "ä¿¡æ¯ä¿å­˜æˆåŠŸã€‚" << endl;
			ofile.close();
		}
	}
	catch (FileErr E)
	{
		E.reasonopen();
		cout << "æŒ‰ä»»æ„é”®è¿”å›ã€‚" << endl;
		char c = getch();
	}
}

//ä¿®æ”¹å¯¹è±¡ä¿å­˜å‡½æ•°
//å‚æ•°ï¼štargetï¼šç”¨æ¥å‚¨å­˜å¯¹è±¡æ‰€åœ¨æ–‡ä»¶è¡Œæ•°/ iï¼šç›®æ ‡æ–‡ä»¶æ‰€åœ¨çš„è¡Œæ•° / line_num:æ€»è¡Œæ•° / lineï¼šstringç±»æ•°ç»„æŒ‡é’ˆ åˆ†åˆ«å‚¨å­˜äº†æ–‡ä»¶ä¸­æ¯ä¸€è¡Œçš„å­—ç¬¦ä¸² / ofile:è¾“å‡ºæµæ–‡ä»¶
//åœ¨modifymode()ä¸­è°ƒç”¨æ­¤å‡½æ•°ï¼Œå¯ä»¥æŠŠä¿®æ”¹è¿‡çš„å¯¹è±¡å­˜å…¥txtæ–‡ä»¶ä¸­ã€‚
// ç”¨äºä¿å­˜ï¼Œå¹¶éç”¨äºä¿®æ”¹ã€‚
//return: æ— 

void TA::modify(int target, int i, int line_num, string* line, ofstream& ofile)
{
	target = i;
	for (i = 0; i < line_num; i++)
	{
		if (i != target) ofile << *(line + i) << endl;
		else
		{
			ofile.close();
			this->save();
			ofile.open("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::app);
			continue;
		}
	}
	cout << "æ–°ä¿¡æ¯å·²ä¿å­˜ã€‚" << endl;
}
```



### å…¶ä»–ç±»

#### æ—¥æœŸç±» date.h

```c++
//æ—¥æœŸç±»çš„å£°æ˜
//é‡è½½äº†è¾“å…¥æµè¿ç®—ç¬¦å’Œè¾“å‡ºæµè¿ç®—ç¬¦ï¼Œåˆ°æ—¶å€™æ–¹ä¾¿ä¸€èµ·è¾“å‡º
#pragma once
#include<iostream>

#ifndef DATE_H
#define DATE_H

class Date
{
public:
	Date(int yy=0, int mm=0, int dd=0);
	~Date();
	int getyear() const;
	int getmonth() const;
	int getday() const;
	Date& operator = (const Date& rhs);
	friend std::ostream& operator<<(std::ostream&, const Date& rhs);
	friend std::istream& operator>>(std::istream&, Date& rhs);
private:
	int year;
	int month;
	int day;
};

#endif //!DATE_H
```

#### date.cpp

```c++
#include"date.h"
#include <iostream>
using namespace std;

bool date_find(int year, int month, int day) //è¾“å…¥å¹´æœˆæ—¥ åˆ¤æ–­æ—¥æœŸæ˜¯å¦åˆæ³•
{
	if (year < 1901 || year >2021 || month < 1 || month > 12 || day < 1 || day > 31) return false;
	else if (month == 4 || month == 6 || month == 9 || month == 11)
	{
		if (day == 31) return false;
		else return true;
	}
	else if (month == 2)
	{
		if (year % 4 == 0)  //é—°å¹´
		{
			if (day > 29) return false;
			else return true;
		}
		else
		{
			if (day > 28) return false;
			else return true;
		}
	}
	else return true;

}


Date::Date(int yy, int mm, int dd)
{
	int a, b, c;
	a = yy;
	b = mm;
	c = dd;
	while (!date_find(a, b, c))
	{
		cout << "æ—¥æœŸä¸åˆæ³•ï¼è¯·é‡æ–°è¾“å…¥ï¼ˆå¹´/æœˆ/æ—¥ï¼‰" << endl;
		cin >> a >> b >> c;
	}
	year = a;
	month = b;
	day = c;
}


Date::~Date() { }

int Date::getyear() const { return year; }
int Date::getmonth() const { return month; }
int Date::getday() const { return day; }

Date& Date::operator=(const Date& rhs)
{
	if (this == &rhs) return *this;
	year = rhs.year;
	month = rhs.month;
	day = rhs.day;
	return *this;
}

ostream& operator <<(ostream& output, const Date& rhs)
{
	output << rhs.year << " ";
	output << rhs.month << " ";
	output << rhs.day;
	return output;
}

istream& operator >>(istream& input, Date& rhs)
{
	input >> rhs.year >> rhs.month >> rhs.day;
	while (!date_find(rhs.getyear(), rhs.getmonth(), rhs.getday()))
	{
		cout << "æ—¥æœŸä¸åˆæ³•ï¼è¯·é‡æ–°è¾“å…¥ï¼ˆå¹´/æœˆ/æ—¥ï¼‰ï¼š" << endl;
		input.clear();
		input >> rhs.year >> rhs.month >> rhs.day;
	}
	return input;
}


```

#### æ–‡ä»¶å¼‚å¸¸ç±» FileErr.h

```c++
//æ“ä½œé”™è¯¯ç±»ï¼Œå£°æ˜æŠ¥é”™çš„å‡½æ•°

#pragma once
#ifndef FILEERR_H
#define FILEERR_H

class FileErr
{
public:

	int reasonopen() const;
	int reasonread() const;
};

#endif // !FILEERR_H

```

#### FileErr.cpp

```c++
#include"FileErr.h"
#include<iostream>
using namespace std;

int FileErr::reasonopen() const
{
	cout << "æ–‡ä»¶æ‰“å¼€å¤±è´¥ï¼" << endl;
	return 0;
}

int FileErr::reasonread() const
{
	cout << "æ–‡ä»¶è¯»å†™é”™è¯¯ï¼" << endl;
	return 0;
}
```

#### æ“ä½œç³»ç»Ÿ conductor.h

```c++
#pragma once
#include"date.h"
#include"abstract_human.h"
#include"people.h"
#include"student.h"
#include"graduate.h"
#include"teacher.h"
#include"TA.h"
#include"FileErr.h"


#include<iostream>
#include<string>
#include<fstream>
#include<strstream>
#include<iomanip>
#include<conio.h>
#pragma warning(disable:4996)
using namespace std;

#ifndef CONDUCTOR_H
#define CONDUCTOR_H
//è¯»å–æ–‡ä»¶ä¸­ä¸€è¡Œçš„ä¿¡æ¯å¹¶æ‰“å°å‡ºæ¥ã€‚
void getinfo_line(ifstream& ifile)
{
	char genre[10];
	
	string name, number, sex, classno, subject,department ,principal;
	Date birthday;
	ifile >> genre >> name >> number >> sex >> birthday;
	switch (genre[0] - 48)
	{
	case 1:
	{
	People* p;
	p = new People(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday());
	cout << *p;
	delete p; }break;
	case 2:
	{ifile >> classno;

	Student* s = new Student(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), classno);
	cout << *s;
	delete s; }break;
	case 3:
	{ifile >> classno >> subject;
	Graduate* g;
	g = new Graduate(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), classno, subject);
	cout << *g;
	delete g; }break;
	
	case 4:
	{ifile >> department >> principal;
	Teacher* t;
	t = new Teacher(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), department, principal);
	cout << *t;
	delete t; }break;

	case 5:
	{ifile >>classno>>subject >>department >> principal;
	TA* ta;
	ta = new TA(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), classno, subject, department, principal);
	cout << *ta;
	delete ta; }break;
	}
}

//è¯»å–æ–‡ä»¶ä¸­ä¸€è¡Œçš„ä¿¡æ¯å¹¶åˆ¤å®šæ˜¯å¦ä¸æ‰€éœ€æŸ¥æ‰¾çš„ä¿¡æ¯ç›¸åŒ¹é…ï¼Œè‹¥åŒ¹é…åˆ™æ‰“å°ä¿¡æ¯ï¼Œè‹¥å¦ï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸å¹²ã€‚
void search_line(ifstream& ifile,string info, int& flag)
{
	string genre, name, number, sex, classno,subject,department,principal;
	Date birthday;
	ifile >> genre >> name >> number >> sex >> birthday;
	if (name == info || number == info)
	{
		cout << "===========" << flag << "===========" << endl;
		switch (genre[0] - 48)
		{
		case 1:
		{
			People* p;
			p = new People(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday());
			cout << *p;
			delete p; }break;
		case 2:
		{ifile >> classno;
		Student* s;
		s = new Student(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), classno);
		cout << *s;
		delete s; }break;
		case 3:
		{ifile >> classno >> subject;
		Graduate* g;
		g = new Graduate(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), classno, subject);
		cout << *g;
		delete g; }break;
		case 4:
		{ifile >> department>>principal;
		Teacher* t;
		t = new Teacher(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), department,principal);
		cout << *t;
		delete t; }break;
		case 5:
		{ifile >> classno >> subject>>department>>principal;
		TA* ta;
		ta = new TA(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), classno, subject, department, principal);
		cout << *ta;
		delete ta; }break;
		}
		flag ++;
	}

}
//æœ‰å‚æœç´¢åŒ¹é…äººå‘˜ä¿¡æ¯ã€‚
int search_all(string info)
{
	cout << "å¼€å§‹æŸ¥æ‰¾" << endl;
	try
	{
		int flag = 0;
		ifstream ifile("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt");
		if (!ifile) throw(FileErr());
		else
		{
			char str[1024];
			while (!ifile.eof() && ifile.tellg() != -1)
			{

				search_line(ifile, info, flag);
				cout << "æŒ‡é’ˆä½ç½®ï¼š" << ifile.tellg() << endl;
				ifile.getline(str, 1024, '#');//è·³è¿‡è¿™ä¸€è¡Œï¼Œè¯»åˆ°æ ‡å‡†å­—ç¬¦ã€‚

			}
			ifile.close();
			if (flag >= 1) cout << "å…±æŸ¥æ‰¾åˆ°ä»¥ä¸Š" << flag << "ä¸ªä¿¡æ¯ã€‚" << endl;
			else cout << "æœªæŸ¥æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ï¼" << endl;
			return flag;

		}

	}
	catch (FileErr E)
	{
		E.reasonopen();
		cout << "æŒ‰ä»»æ„é”®è¿”å›ã€‚" << endl;
		char c = getch();
		return 0;
	}
	return 0;
}


//ä»¥ä¸‹ä¸ºåœ¨mainpageé¡µé¢ä¼šå‘ç”¨æˆ·æ˜¾ç¤ºçš„æ¥å£ã€‚
class conductor
{
public:
	~conductor(){ cout << "æ„Ÿè°¢æ‚¨çš„ä½¿ç”¨ï¼Œå†è§ã€‚" << endl; }
	void mainpage()
	{
		system("cls");  //æ¸…å±å‡½æ•°
		cout.width(30);
		cout.fill('+');//è¾“å…¥ç¬¦å·åªèƒ½ç”¨å•å¼•å·
		cout.setf(ios::left);
		cout << " " << endl;

		cout.width(27);
		cout.fill(' ');
		cout.setf(ios::right);
		cout << "é’èŠ±ç“·å¤§å­¦äººäº‹ç®¡ç†ç³»ç»Ÿ" << endl;

		cout << " ";
		cout.width(29);
		cout.setf(ios::left);
		cout.fill('+');
		cout << "" << endl;


		cout.width(32);
		cout.fill('#');//è¾“å…¥ç¬¦å·åªèƒ½ç”¨å•å¼•å·
		cout << "" << endl << endl;

		cout.width(18);
		cout.fill(' ');
		cout.setf(ios::right);
		cout << "ä¸»èœå•" << endl;
		cout.width(21);
		cout << "1.æ•°æ®å½•å…¥" << endl;
		cout.width(21);
		cout << "2.æ•°æ®åˆ é™¤" << endl;
		cout.width(21);
		cout << "3.æ˜¾ç¤ºå…¨éƒ¨" << endl;
		cout.width(21);
		cout << "4.æ•°æ®æŸ¥è¯¢" << endl;
		cout.width(21);
		cout << "5.æ•°æ®ä¿®æ”¹" << endl;
		cout.width(21);
		cout << "6.é€€å‡ºç¨‹åº" << endl;
		cout.width(24);
		cout << "è¯·é€‰æ‹©åºå·(1-6)" << endl;
		cout << " ";
		cout.width(30);
		cout.setf(ios::left);
		cout.fill('+');
		cout << "" << endl;
		cout<<"\n\n\næ¬¢è¿ä½¿ç”¨ã€é’èŠ±ç“·å¤§å­¦äººäº‹ç®¡ç†ç³»ç»Ÿã€‘\n"
			<<"æ³¨æ„ï¼šåˆ‡å‹¿åœ¨ç¨‹åºæ“ä½œé€”ä¸­çªç„¶é€€å‡ºç¨‹åºï¼Œå¯èƒ½å¯¼è‡´ä¸¥é‡çš„æ•°æ®ä¸¢å¤±é—®é¢˜ã€‚é€€å‡ºç¨‹åºè¯·ä½¿ç”¨ç³»ç»Ÿæä¾›çš„æ¥å£ã€‚\n"<<endl;
		button();
		
		}
	void button()
		{
			char input = getch();
			switch (input - 48)
			{
			case 1: add_mode(); break;
			case 2: delete_mode(); break;
			case 3: show_mode(); break;
			case 4: search_mode(); break;
			case 5: modify_mode(); break;
			case 6: exit_mode(); break;
			default: {
				cout << "é”™è¯¯çš„è¾“å…¥ï¼Œè¯·é‡è¯•:" << endl;
				button();
			}
		}

	}
private:
	//å¾€æ–‡ä»¶ä¸­æ·»åŠ äººå‘˜ä¿¡æ¯çš„æ¥å£ã€‚
	void add_mode()
	{
		char flag;
		cout << "è¯·è¾“å…¥æƒ³å½•å…¥äººå‘˜çš„ç±»åˆ«ã€‚" << endl;
		cout << "1.æ— ç±»åˆ« 2.å­¦ç”Ÿ 3.ç ”ç©¶ç”Ÿ 4.æ•™èŒäººå‘˜ 5.åŠ©æ•™" << endl;
		flag = getch();
		abstract_human * pt = NULL;
		switch (flag - 48)
		{
		case 1: { cout << "å½•å…¥æ¨¡å¼ï¼šæ— ç±»åˆ«" << endl; pt = new People(); }break;
		case 2: { cout << "å½•å…¥æ¨¡å¼ï¼šå­¦ç”Ÿ" << endl;  pt = new Student();}break;
		case 3: { cout << "å½•å…¥æ¨¡å¼ï¼šç ”ç©¶ç”Ÿ" << endl; pt = new Graduate(); }break;
		case 4: { cout << "å½•å…¥æ¨¡å¼ï¼šæ•™èŒäººå‘˜" << endl; pt = new Teacher(); }break;
		case 5: { cout << "å½•å…¥æ¨¡å¼ï¼šåŠ©æ•™" << endl; pt = new TA(); }break;
		default: cout << "è¾“å…¥å­—ç¬¦æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ï¼" << endl;
		}
		pt->save();
		delete pt;
		cout << "1.ç»§ç»­æ·»åŠ \t2.è¿”å›ä¸»ç•Œé¢" << endl;
		char button = getch();
		if (button == '1') add_mode();
		else mainpage();

	}

	//æœç´¢æ•´ä¸ªæ–‡ä»¶å¯»æ‰¾åŒ¹é…çš„ä¿¡æ¯ï¼ˆæ— å‚ï¼‰ï¼Œè‹¥æ‰¾åˆ°åŒ¹é…çš„ä¿¡æ¯ï¼Œé€æ¡æ‰“å°è¯¥ä¿¡æ¯ã€‚
	void search_mode()
	{
		cout << "å¼€å§‹æŸ¥æ‰¾..." << endl;
		try
		{
			string info;
			int flag = 1;
			cout << "è¯·è¾“å…¥éœ€è¦æŸ¥æ‰¾çš„å§“å/å­¦å·ï¼š" << endl;
			cin >> info;
			ifstream ifile("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt");
			if (!ifile) throw(FileErr());
			else
			{
				char str[1024];
				while (!ifile.eof() && ifile.tellg() != -1)
				{

					search_line(ifile, info, flag);
					ifile.getline(str, 1024, '#');//è·³è¿‡è¿™ä¸€è¡Œï¼Œè¯»åˆ°æ ‡å‡†å­—ç¬¦ã€‚

				}
				ifile.close();
				if (flag > 1) cout << "=======================\nå…±æŸ¥æ‰¾åˆ°ä»¥ä¸Š" << flag-1 << "ä¸ªä¿¡æ¯ã€‚" << endl;
				else cout << "=======================\næœªæŸ¥æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ï¼" << endl;

			}

		}
		catch (FileErr E)
		{
			E.reasonopen();
			cout << "æŒ‰ä»»æ„é”®è¿”å›ä¸»ç•Œé¢ã€‚" << endl;
			char c = getch();
		}
		cout << "1.é‡æ–°æœç´¢\t2.è¿”å›ä¸»ç•Œé¢" << endl;
		char button = getch();
		if (button == '1') search_mode();
		else mainpage();
	}

	//ä¿®æ”¹äººå‘˜ä¿¡æ¯çš„æ¥å£ è¾“å…¥å¾…æŸ¥æ‰¾çš„ä¿¡æ¯ï¼Œå³å¯åœ¨æ–‡ä»¶åŸä½ç½®è¿›è¡Œä¿®æ”¹ã€‚
	void modify_mode()
	{
		char str[512];
		string info, * line;
		int line_num = -1, i, target = 0;//è·å–æ–‡ä»¶è¡Œæ•°å’Œç›®æ ‡æ–‡ä»¶æ‰€åœ¨çš„è¡Œæ•°
		int genre = 0;
		int flag = 0;  //è®°å½•ä¿®æ”¹çš„ä¿¡æ¯æ•°
		char button;
		char type;
		ifstream ifile;
		ofstream ofile;
		cout << "è¯·è¾“å…¥éœ€è¦ä¿®æ”¹çš„çš„å§“å/å­¦å·ï¼š";
		cin >> info;
		try
		{
			ifile.open("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt");
			if (!ifile) throw(2);
			else
			{
				while (!ifile.eof())
				{
					ifile.getline(str, 1024, '#');
					line_num++;
				}
				line = new(string[line_num]);
				ifile.seekg(0);//ä½¿æ–‡ä»¶æŒ‡é’ˆæ¢å¤åˆ°å¼€å¤´
				for (i = 0; i < line_num; i++)
				{
					getline(ifile, *(line + i)); //getlineå‡½æ•°çš„å¦ä¸€ç§ç”¨æ³•
				}
				ifile.seekg(ios::beg);//ä½¿æ–‡ä»¶æŒ‡é’ˆæ¢å¤åˆ°å¼€å¤´
			//ä»¥ä¸Šå†…å®¹ä¸ºä½¿ç”¨å­—ç¬¦ä¸²å‚¨å­˜æ–‡ä»¶ä¸­å·²æœ‰çš„æ¯ä¸€è¡Œä¿¡æ¯ã€‚
				string genre, name, number, sex, classno, subject, dpmt, principal;
				Date birthday;
				for (i = 0; i < line_num && ifile.tellg() != -1; i++)
				{
					ifile >> genre >> name >> number >> sex >> birthday;
					cout << "è¯»å–è¿›åº¦ï¼š" << i + 1 << "/" << line_num << endl;
					if (name == info || number == info)
					{
						flag ++;
						cout << "åœ¨ç¬¬" << i + 1 << "è¡Œå¤„æŸ¥æ‰¾åˆ°ä¿¡æ¯å¦‚ä¸‹ï¼š" << endl;
						switch (genre[0] - 48)   //åˆ¤æ–­æŒ‡é’ˆç±»å‹
						{
						case 1:
						{People* p;
						p = new People(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday());
						cout << *p;
						delete p; }break;
						case 2:
						{ifile >> classno;
						Student* s;
						s = new Student(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), classno);
						cout << *s;
						delete s; }break;
						case 3:
						{ifile >> classno >> subject;
						Graduate* g;
						g = new Graduate(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), classno, subject);
						cout << *g;
						delete g; }break;
						case 4:
						{ifile >> dpmt >> principal;
						Teacher* t;
						t = new Teacher(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), dpmt, principal);
						cout << *t;
						delete t; }break;
						case 5:
						{ifile >> classno >> subject >> dpmt >> principal;
						TA* ta;
						ta = new TA(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), classno, subject, dpmt, principal);
						cout << *ta;
						delete ta; }break;
						}
						cout << "æ˜¯å¦å¯¹æ­¤ä¿¡æ¯è¿›è¡Œä¿®æ”¹ï¼Ÿ(Y/N)" << endl;
						cin >> button;
						if (button == 'Y' || button == 'y')
						{
							cout << "è¯·è¾“å…¥æƒ³è¦ä¿®æ”¹çš„äººå‘˜ç±»åˆ«ï¼š\n1.æ— ç±»åˆ«  2.å­¦ç”Ÿ  3.ç ”ç©¶ç”Ÿ  4.æ•™èŒäººå‘˜  5.åŠ©æ•™\n" ;
							cin >> type;
							abstract_human* pt = NULL;
							ifile.close();
							ofile.open("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::trunc);
							switch (type - 48)
							{
							case 1: {
								cout << "ä¿®æ”¹æ¨¡å¼ï¼šå³å°†ç”Ÿæˆã€1æ— ç±»åˆ«ã€‘..." << endl;
								pt =new People();
							}break;
							case 2: {
								cout << "ä¿®æ”¹æ¨¡å¼ï¼šå³å°†ç”Ÿæˆã€2å­¦ç”Ÿã€‘..." << endl;
								pt = new Student();
							}break;
							case 3: {
								cout << "ä¿®æ”¹æ¨¡å¼ï¼šå³å°†ç”Ÿæˆã€3ç ”ç©¶ç”Ÿã€‘..." << endl;
								pt = new Graduate();
							}break;
							case 4: {
								cout << "ä¿®æ”¹æ¨¡å¼ï¼šå³å°†ç”Ÿæˆã€4æ•™èŒäººå‘˜ã€‘..." << endl;
								pt = new Teacher();
							}break;
							case 5: {
								cout << "ä¿®æ”¹æ¨¡å¼ï¼šå³å°†ç”Ÿæˆã€5åŠ©æ•™ã€‘..." << endl;
								pt = new TA();
							}break;
							
							default: {cout << "é”™è¯¯çš„è¾“å…¥ï¼è¯·é‡è¯•ï¼" << endl;
							}
							}
							pt->modify(target, i, line_num, line, ofile);
							delete pt;
							ofile.close();
						}
					}
					ifile.getline(str, 1024, '#');
				}
				delete[]line;
			}


		}
		catch (int)
		{
			cout << "æ–‡ä»¶æ‰“å¼€å‘ç”Ÿé”™è¯¯ã€‚" << endl;
			cout << "æŒ‰ä»»æ„é”®è¿”å›ã€‚" << endl;
			info[0] = getch();
			return;
		}
		catch (FileErr E)
		{
			E.reasonread();
			cout << "æŒ‰ä»»æ„é”®è¿”å›ã€‚" << endl;
			info[0] = getch();
			return;
		}
		if (flag == 0) cout << "æœªæŸ¥æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ï¼" << endl;
		cout << "1.ç»§ç»­ä¿®æ”¹\t2.è¿”å›ä¸»ç•Œé¢" << endl;
		button = getch();
		if (button == '1') modify_mode();
		else mainpage();

	}

	//åˆ é™¤äººå‘˜ä¿¡æ¯çš„æ¥å£ï¼Œè¾“å…¥å¾…æŸ¥æ‰¾çš„ä¿¡æ¯ï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­åˆ é™¤è¯¥æ¡ä¿¡æ¯ã€‚
	void delete_mode()
	{
		char str[512];
		string info, * line;
		int line_num = -1, i, target = -1;//è·å–æ–‡ä»¶è¡Œæ•°å’Œç›®æ ‡æ–‡ä»¶æ‰€åœ¨çš„è¡Œæ•°
		int genre = 0;
		int flag = 0;  //è®°å½•æŸ¥æ‰¾çš„ä¿¡æ¯æ•°
		char button;
		ifstream ifile;
		ofstream ofile;
		cout << "è¯·è¾“å…¥éœ€è¦åˆ é™¤çš„çš„å§“å/å­¦å·ï¼š";
		cin >> info;
		try
		{
			ifile.open("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt");
			if (!ifile) throw(2);
			else
			{
				while (!ifile.eof())
				{
					ifile.getline(str, 1024, '#');
					line_num++;
				}
				line = new(string[line_num]);
				ifile.seekg(0);//ä½¿æ–‡ä»¶æŒ‡é’ˆæ¢å¤åˆ°å¼€å¤´
				for (i = 0; i < line_num; i++)
				{
					getline(ifile, *(line + i));
				}
				ifile.seekg(0);//ä½¿æ–‡ä»¶æŒ‡é’ˆæ¢å¤åˆ°å¼€å¤´
			//ä»¥ä¸Šå†…å®¹ä¸ºä½¿ç”¨å­—ç¬¦ä¸²å‚¨å­˜æ–‡ä»¶ä¸­å·²æœ‰çš„æ¯ä¸€è¡Œä¿¡æ¯ã€‚
				string genre, name, number, sex, classno, subject, dpmt, principal;
				Date birthday;
				for (i = 0; i < line_num && ifile.tellg() != -1; i++)
				{
					ifile >> genre >> name >> number >> sex >> birthday;
					cout << "è¯»å–è¿›åº¦ï¼š" << i + 1 << "/" << line_num << endl;
					if (name == info || number == info)
					{
						flag = 1;
						cout << "åœ¨ç¬¬" << i + 1 << "è¡Œå¤„æŸ¥æ‰¾åˆ°ä¿¡æ¯å¦‚ä¸‹ï¼š" << endl;
						switch (genre[0] - 48)   //åˆ¤æ–­æŒ‡é’ˆç±»å‹
						{
						case 1:
						{People* p;
						p = new People(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday());
						cout << *p;
						cout << "æ˜¯å¦å¯¹æ­¤ä¿¡æ¯è¿›è¡Œåˆ é™¤ï¼Ÿ(Y/N)" << endl;
						cin >> button;
						if (button == 'Y' || button == 'y')
						{
							target = i;
							ifile.close();
							ofile.open("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::trunc);
						}
						delete p; }break;
						case 2:
						{ifile >> classno;
						Student* s;
						s = new Student(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), classno);
						cout << *s;
						cout << "æ˜¯å¦å¯¹æ­¤ä¿¡æ¯è¿›è¡Œåˆ é™¤ï¼Ÿ(Y/N)" << endl;
						cin >> button;
						if (button == 'Y' || button == 'y')
						{
							target = i;
							ifile.close();
							ofile.open("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::trunc);
						} delete s; }break;
						case 3:
						{ifile >> classno >> subject;
						Graduate* g;
						g = new Graduate(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), classno, subject);
						cout << *g;
						cout << "æ˜¯å¦å¯¹æ­¤ä¿¡æ¯è¿›è¡Œåˆ é™¤ï¼Ÿ(Y/N)" << endl;
						cin >> button;
						if (button == 'Y' || button == 'y')
						{
							target = i;
							ifile.close();
							ofile.open("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::trunc);
						} delete g; }break;
						case 4:
						{ifile >> dpmt >> principal;
						Teacher* t;
						t = new Teacher(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), dpmt, principal);
						cout << *t;
						cout << "æ˜¯å¦å¯¹æ­¤ä¿¡æ¯è¿›è¡Œåˆ é™¤ï¼Ÿ(Y/N)" << endl;
						cin >> button;
						if (button == 'Y' || button == 'y')
						{
							target = i;
							ifile.close();
							ofile.open("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::trunc);
						} delete t; }break;
						case 5:
						{ifile >> classno >> subject >> dpmt >> principal;
						TA* ta;
						ta = new TA(name, number, sex, birthday.getyear(), birthday.getmonth(), birthday.getday(), classno, subject, dpmt, principal);
						cout << *ta;
						cout << "æ˜¯å¦å¯¹æ­¤ä¿¡æ¯è¿›è¡Œåˆ é™¤ï¼Ÿ(Y/N)" << endl;
						cin >> button;
						if (button == 'Y' || button == 'y')
						{
							target = i;
							ifile.close();
							ofile.open("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt", ios::trunc);
						} delete ta; }break;
						}
					}
					ifile.getline(str, 1024, '#');
					if (target != -1)
					{
						for (i = 0; i < line_num; i++)
						{
							if (i != target)
							{
								ofile << *(line + i) << endl;
								cout << *(line + i) << endl;
							}
							else {
								cout << "åˆ é™¤ï¼š" << *(line + i) << endl;
							}
						}
						ofile.close();
						cout << "åˆ é™¤æ“ä½œæˆåŠŸï¼" << endl;
					}
				}
				delete[]line;
			}
			
		}
		catch (int)
		{
			cout << "æ–‡ä»¶æ‰“å¼€å‘ç”Ÿé”™è¯¯ã€‚" << endl;
			cout << "æŒ‰ä»»æ„é”®è¿”å›ã€‚" << endl;
			info[0] = getch();
			return;
		}
		catch (FileErr E)
		{
			E.reasonread();
			cout << "æŒ‰ä»»æ„é”®è¿”å›ã€‚" << endl;
			info[0] = getch();
			return;
		}
		if (flag == 0) cout << "æœªæŸ¥æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ï¼" << endl;
		cout << "ä¿¡æ¯å·²éå†å®Œæˆã€‚\n1.ç»§ç»­åˆ é™¤\t2.è¿”å›ä¸»ç•Œé¢" << endl;
		button = getch();
		if (button == '1') delete_mode();
		else mainpage();
	}

	//æ˜¾ç¤ºä¿¡æ¯æ¥å£ï¼Œè¯»å–æ•´ä¸ªæ–‡ä»¶ä¸­çš„ä¿¡æ¯å¹¶æ‰“å°å‡ºæ¥ã€‚
	void show_mode()

	{
		int num = 1;
		int count = 0;
		cout << "å¼€å§‹æå–æ–‡ä»¶ä¿¡æ¯ã€‚ã€‚ã€‚" << endl;
		try
		{
			ifstream ifile("å­¦æ ¡äººå‘˜è®°å½•è¡¨æ ¼.txt");
			if (!ifile) throw(FileErr());
			else
			{
				char str[1024];
				while (!ifile.eof() && ifile.tellg() != -1)
				{
					ifile.getline(str, 1024, '#');
					count++;
				}
				ifile.seekg(ios::beg);
				for (num; num< count;num++)
				{
					cout << "==========="<<num<<"===========" << endl;
					getinfo_line(ifile);
					ifile.getline(str, 1024, '#');//è·³è¿‡è¿™ä¸€è¡Œï¼Œè¯»åˆ°æ ‡å‡†å­—ç¬¦ã€‚
				}
				ifile.close();
				cout << "=======================\nä¿¡æ¯å·²å…¨éƒ¨æ˜¾ç¤ºï¼\næŒ‰ä»»æ„é”®è¿”å›ä¸»ç•Œé¢ã€‚" << endl;
				char t = getch();
				mainpage();

			}

		}
		catch (FileErr E)
		{
			E.reasonopen();
			cout << "æŒ‰ä»»æ„é”®è¿”å›ã€‚" << endl;
			char c = getch();
		}
		
	}
	
	//æ˜¾ç¤ºæ„Ÿè°¢ä½¿ç”¨ç•Œé¢ï¼Œé€€å‡ºç¨‹åºã€‚
	void exit_mode()
	{
		return;
	}

};




#endif // !CONDUCTOR_H


```

### main.cpp

```c++
#include"conductor.h"
int main()
{
	conductor Init;
	Init.mainpage();
	return 0;
} //é‡‘åˆšèŠ­æ¯”æœ¬æ¯”
```

---

## é™„å½•2ï¼šè¯„åˆ†è¡¨

![image-20210723154445357](C:\Users\Yu.Y\AppData\Roaming\Typora\typora-user-images\image-20210723154445357.png)

